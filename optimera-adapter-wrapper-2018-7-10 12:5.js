!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){},{}],2:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){h&&y&&(h=!1,y.length?g=y.concat(g):v=-1,g.length&&u())}function u(){if(!h){var e=o(s);h=!0;for(var t=g.length;t;){for(y=g,g=[];++v<t;)y&&y[v].run();v=-1,t=g.length}y=null,h=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var p,f,d=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var y,g=[],h=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new c(e,t)),1!==g.length||h||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],3:[function(e,t,r){(function(t,n){function i(e,t){this._id=e,this._clearFn=t}var o=e(2).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;r.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r.setImmediate="function"==typeof t?t:function(e){var t=c++,n=!(arguments.length<2)&&s.call(arguments,1);return u[t]=!0,o(function(){u[t]&&(n?e.apply(null,n):e.call(null),r.clearImmediate(t))}),t},r.clearImmediate="function"==typeof n?n:function(e){delete u[e]}}).call(this,e(3).setImmediate,e(3).clearImmediate)},{}],4:[function(e,t,r){"use strict";function n(e){var t,r,n;return function(){var i=l.GptLayer(e);if(i)throw u("INVALID_CONFIG",i);t=o(),r={slotDemandHistory:{},globalTimeout:e.globalTimeout},a.globalTimeout=e.globalTimeout,n={};for(var p=0;p<c.length;p++)n=s.mergeObjects(n,c[p](e,r,t._executeNext));t._setDirectInterface("GptLayer",n)}(),i.derive(t,{__type__:"GptLayer"})}var i=e(10),o=e(5),a=e(47),s=e(27),u=e(28),c=[e(36),e(30),e(33),e(32),e(35),e(31),e(34)],l=e(12);t.exports=n},{}],5:[function(e,t,r){"use strict";function n(){function e(e,t){return i.resolve(t)}function t(e,t){l={},l[e]=t}function r(e){p=e}function n(){return l}function s(e){var t=a.validate({type:"function"},e);if(!t.valid)throw o("INVALID_ARGUMENT",t.format());f=e}function u(e,t){return f(e,t).then(function(t){var r=a.validate({type:"object",strict:!0,properties:{sessionId:{type:"string",minLength:1},receivedParcels:{type:"array",items:{type:"object"}}}},{sessionId:e,receivedParcels:t});if(!r.valid)throw o("INVALID_ARGUMENT",r.format());return t})}function c(e,t){var r=a.validate({type:"object",properties:{sessionId:{type:"string",minLength:1},inParcels:{type:"array",items:{type:"object"}}}},{sessionId:e,inParcels:t});if(!r.valid)throw o("INVALID_ARGUMENT",r.format());return i.resolve().then(function(){return p(e,t)})}var l,p,f;return function(){l=null,p=e,f=e}(),{__type__:"Layer",_setDirectInterface:t,_setExecutor:r,_executeNext:u,setNext:s,getDirectInterface:n,execute:c}}var i=e(17),o=e(28),a=e(18);t.exports=n},{}],6:[function(e,t,r){"use strict";function n(e){function t(e,t){return r._executeNext(e,t).then(function(t){f.info("Mediating the following bids for session "+e),f.info(JSON.stringify(t.map(function(e){if(e.htSlot)return{htSlotName:e.htSlot.getName(),partnerId:e.partnerId,price:u.isNumber(e.price)?e.price:"pass"}}),null,4));for(var r={slot:{},partner:{}},o=[],a=t.slice();t.length;){var c=u.randomSplice(t);if(c.htSlot){var l=c.htSlot.getName();c.pass||(c.hasOwnProperty("price")&&u.isNumber(c.price)?(r.slot.hasOwnProperty(l)?r.slot[l].price<c.price&&(r.slot[l]=c):r.slot[l]=c,n===s.MediationLevels.PARTNER&&(r.partner[l]=r.partner[l]||{},r.partner[l].hasOwnProperty(c.partnerId)?r.partner[l][c.partnerId].price<c.price&&(r.partner[l][c.partnerId]=c):r.partner[l][c.partnerId]=c),f.info('Parcel from "'+c.partnerId+'" has price "'+c.price+'".')):(f.warn('Parcel from "'+c.partnerId+'" does not contain a numeric price.'),n===s.MediationLevels.PARTNER&&o.push(c)))}}for(var p in r.slot)if(r.slot.hasOwnProperty(p)){var d=r.slot[p];if(f.info('Overall winner for htSlot "'+p+'":'),f.info(JSON.stringify({htSlotName:d.htSlot.getName(),partnerId:d.partnerId,price:d.price},null,4)),i.emit("hs_slot_highest_bid",{sessionId:e,statsId:d.partnerStatsId,htSlotId:d.htSlot.getId(),requestId:d.requestId,xSlotNames:[d.xSlotName]}),n===s.MediationLevels.HT_SLOT)o.push(d);else if(n===s.MediationLevels.PARTNER){r.partner.hasOwnProperty(p)||f.error("htSlotNameToHighestParcel should have `"+p+"` in partner object.");for(var y in r.partner[p])if(r.partner[p].hasOwnProperty(y)){f.info('The highest price for "'+p+'" from "'+y+'" is:');var g=r.partner[p][y];f.info(JSON.stringify({htSlotName:g.htSlot.getName(),partnerId:g.partnerId,price:g.price},null,4)),o.push(r.partner[p][y])}}}return n===s.MediationLevels.NONE?a:o})}var r,n;return function(){i=l.services.EventsService;var o=p.MediationLayer(e);if(o)throw c("INVALID_CONFIG",o);r=a(),r._setExecutor(t),n=s.MediationLevels[e.mediationLevel]}(),o.derive(r,{__type__:"MediationLayer"})}var i,o=e(10),a=e(5),s=e(13),u=e(27),c=e(28),l=e(47),p=e(12),f=e(24);t.exports=n},{}],7:[function(e,t,r){"use strict";function n(t){function r(e,t,r,n,i){if(i&&r.getPrefetchDisabled())return[];var o=n.slice(),a=[];if(!i&&(c.appendToArray(a,_.fulfilDemand(e,t,r,o)),!o.length))return a;var u=r.retrieve(e,o),l=u.map(function(e){var r=s.defer();return e.then(function(e){r.resolve(e)}).catch(function(e){y.error('Partner "'+t+'" was unable to retrieve.'),y.error(e.stack),r.resolve([])}),r});if(i){var p=l.map(function(e){return e.promise});_.storeDemand(e,t,r,o,p)}return c.appendToArray(a,l),a}function n(e,t,n){for(var i={defers:[],promises:[]},o=Object.keys(w);o.length;){var a=c.randomSplice(o),s=w[a];if(s.enabled)try{for(var u=r(e,a,s.instance,t,n),l=0;l<u.length;l++)i.defers.push(u[l]),i.promises.push(u[l].promise)}catch(e){y.error('Partner "'+a+'" was unable to retrieve.'),y.error(e.stack)}}return i}function g(e){if(!w.hasOwnProperty(e))return void y.info('Partner module "'+e+'" does not exist.');if(w[e].enabled)return void y.info('Partner module "'+e+'" already enabled.');if(!w[e].instance)try{if(w[e].instance=p[e](w[e].configs),!w[e].instance)return w[e].enabled=!1,void y.warn("Failed to enable partner "+e)}catch(t){return y.error('Partner module "'+e+'" failed to load.'),void y.error(t.stack)}w[e].enabled=!0}function h(e){return w.hasOwnProperty(e)?w[e].enabled?void(w[e].enabled=!1):void y.info('Partner module "'+e+'" already disabled.'):void y.info('Partner module "'+e+'" does not exist.')}function v(e){var t=d.validate({type:"object",strict:!0,properties:{rubicon:{type:"object",strict:!0,properties:{keywords:{optional:!0,type:"array",items:{type:"string"}},inventory:{optional:!0,properties:{"*":{type:"array",items:{type:"string"}}}},visitor:{optional:!0,properties:{"*":{type:"array",items:{type:"string"}}}}}}}},e);if(!t.valid)throw l("INVALID_ARGUMENT",t.format());for(var r in e)if(e.hasOwnProperty(r))if(I.hasOwnProperty(r))for(var n=I[r],i=0;i<n.length;i++){var o=n[i];w.hasOwnProperty(o)&&w[o].instance.setFirstPartyData(e[r])}else y.warn("Partner property name "+r+" not recognized in first-party data object")}function m(e,t){var r=n(e,t);return i.addTimerCallback(e,function(){for(var e=0;e<r.defers.length;e++)r.defers[e].resolve([])}),s.all(r.promises).then(function(t){return i.clearTimer(e),t?c.mergeArrays.apply(null,t):[]})}var b,_,w,I={rubicon:["RubiconHtb","RubiconExtHtb"]};return function(){i=u.services.TimerService,b=a();var r=e(12),o=r.PartnersLayer(t,Object.keys(p));if(o)throw l("INVALID_CONFIG",o);w=t.partners;for(var s={},d=Object.keys(w),I=d.length-1;I>=0;I--){var S=c.randomSplice(d),L=w[S];if(L.enabled)try{if(L.instance=p[S](L.configs,S),!L.instance){L.enabled=!1;continue}L.instance.getDirectInterface()&&(s=c.mergeObjects(s,L.instance.getDirectInterface()))}catch(e){y.error('Partner module "'+S+'" failed to load.'),y.error(e),L.enabled=!1}}var T={enablePartner:g,disablePartner:h,Partners:s,setFirstPartyData:v};_=f(t,{__invokeAllPartners:n}),T.prefetchOnLoad=_.prefetchOnLoad,b._setDirectInterface("PartnersLayer",T),b._setExecutor(m)}(),o.derive(b,{__type__:"PartnersLayer"})}var i,o=e(10),a=e(5),s=e(17),u=e(47),c=e(27),l=e(28),p={OptimeraHtb:e(38)},f=e(40),d=e(18),y=e(24);t.exports=n},{}],8:[function(e,t,r){"use strict";function n(e){function t(t){return e.roundingType===n.RoundingTypes.FLOOR?Math.floor(t):t}function r(r){var a=s.validate({type:["string","number"],minLenth:1,exec:function(e,t){i.isNumeric(t)||this.report("must be numeric")}},r);if(!a.valid)throw o("INVALID_ARGUMENT",a.format());var u=0,p=1,f=r.toString(),d=f.indexOf(".");if(d>-1&&(u=f.length-d-1,f=f.slice(0,d)+f.slice(d+1)),u>=c)u-=c;else{var y=c-u;u=0,f=i.padEnd(f,f.length+y,"0")}f.length>9&&(u-=f.length-9,f=f.slice(0,9)),p=Math.pow(10,u),f=Number(f);var g=e.buckets.length;if(f<e.floor*p)f=0;else if(f>=e.buckets[g-1].max*p)f=e.buckets[g-1].max*p;else{for(var h,v=e.floor,m=0;m<g&&(h=e.buckets[m],!(f<=h.max*p));m++)v=h.max;e.roundingType!==n.RoundingTypes.NONE&&(f-=v*p,f/=h.step*p,f=t(f),f*=h.step*p,f+=v*p)}f=f.toString(),u+=l;var b=f.length-u;b<1&&(f=i.padStart(f,f.length+(1-b),"0"),b=1);var _=f.slice(0,b);return 0!==e.outputPrecision&&(_=_+"."+f.slice(b),e.outputPrecision>0&&(_=u<e.outputPrecision?i.padEnd(_,b+e.outputPrecision+1,"0"):_.slice(0,b+e.outputPrecision+1))),_}var c,l,p={floor:0,buckets:[{max:1/0,step:1}]};return function(){var t=a.bidTransformerConfig(e);if(t)throw o("INVALID_CONFIG",t);c=Math.round(Math.log(e.bidUnitInCents)*Math.LOG10E),l=Math.round(Math.log(e.outputCentsDivisor)*Math.LOG10E),e.roundingType=n.RoundingTypes[e.roundingType];for(var r=["floor","buckets"],i=0;i<r.length;i++){var s=r[i];e.hasOwnProperty(s)||(e[s]=p[s],u.warn("Applying default value "+p[s]+" for "+s))}}(),{__type__:"BidTransformer",apply:r}}var i=e(27),o=e(28),a=e(12),s=e(18),u=e(24);n.RoundingTypes={NONE:0,FLOOR:1},t.exports=n},{}],9:[function(e,t,r){"use strict";var n=e(28),i=e(18),o=e(24);t.exports=function(){function e(e,t){var r=i.validate({type:"object",strict:!0,properties:{httpValue:{type:"string",optional:!0},httpsValue:{type:"string",optional:!0}}},{httpValue:e,httpsValue:t});if(!r.valid)throw n("INVALID_ARGUMENT",r.format());return e=e||"http:",t=t||"https:","https:"===document.location.protocol?t:e}function t(){return("CSS1Compat"===w.document.compatMode?w.document.documentElement:w.document.body).clientWidth}function r(){return("CSS1Compat"===w.document.compatMode?w.document.documentElement:w.document.body).clientHeight}function a(){return w.screen.width}function s(){return w.screen.height}function u(){return document.referrer}function c(){return w.location.hostname}function l(){return navigator.userAgent}function p(){return navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage}function f(){return w.location.pathname}function d(){try{return window.top===window.self}catch(e){return!1}}function y(){return d()?location.href:document.referrer||location.href}function g(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}function h(e,t,r,a){var s=i.validate({type:"object",strict:!0,properties:{perContextFn:{type:["function","null"],optional:!0},topContextFn:{type:["function","null"],optional:!0}}},{perContextFn:e,topContextFn:t});if(!s.valid)throw n("INVALID_ARGUMENT",s.format());try{for(var u,c=window,l=0;;)if(!(r&&l<r)){if(a&&l>a)break;if(e&&(u=e(c)))return u;var p;try{p=c.frameElement}catch(e){p=null}if(null===p){if(t&&(u=t(c)))return u;break}c=c.parent,l++}}catch(e){o.error("Error occurred while running either the perContextFn or topContextFn."),o.error(e.stack)}return null}function v(e){var t=i.validate({type:"string",minLength:1},e);if(!t.valid)throw n("INVALID_ARGUMENT",t.format());return h(function(t){return t.hasOwnProperty(e)?t[e]:null})}function m(e,t){var r=i.validate({type:"object",strict:!0,properties:{srcUrl:{type:["string","null"],minLength:1,optional:!0}}},{srcUrl:e});if(!r.valid)throw n("INVALID_ARGUMENT",r.format());var o=t||w,a=o.document.createElement("iframe");return e&&(a.src=e),a.width=0,a.height=0,a.scrolling="no",a.marginWidth=0,a.marginHeight=0,a.frameBorder=0,a.setAttribute("style","border: 0px; vertical-align: bottom; visibility: hidden; display: none;"),o.document.body.appendChild(a),a}function b(e){var t=e+"=",r=w.document.cookie.split(";");for(var n in r)if(r.hasOwnProperty(n)){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}function _(){var e=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(t){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}return e}var w;return function(){w=h(null,function(e){return e})}(),{__type__:"Browser",topWindow:w,getProtocol:e,isLocalStorageSupported:g,getViewportWidth:t,getViewportHeight:r,isTopFrame:d,getScreenWidth:a,getScreenHeight:s,getReferrer:u,getPageUrl:y,getHostname:c,getUserAgent:l,getLanguage:p,getPathname:f,getNearestEntity:v,traverseContextTree:h,createHiddenIFrame:m,readCookie:b,isFlashSupported:_}}()},{}],10:[function(e,t,r){"use strict";var n=e(28),i=e(18);t.exports=function(){function e(e){var t=i.validate({type:"object",strict:!0,properties:{theClass:{type:"object",properties:{__type__:{type:"string"}}}}},{theClass:e});if(!t.valid)throw n("INVALID_ARGUMENT",t.format());for(var r in e)e.hasOwnProperty(r)&&"_"===r[0]&&"__"!==r.slice(0,2)&&delete e[r];return e}function t(t,r){var o=i.validate({type:"object",properties:{base:{type:"object",properties:{__type__:{type:"string",minLength:1}}},derived:{type:"object",properties:{__type__:{type:"string",minLength:1}}}}},{base:t,derived:r});if(!o.valid)throw n("INVALID_ARGUMENT",o.format());var a,s={};for(a in t)t.hasOwnProperty(a)&&(s[a]=t[a]);for(a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);return e(s)}return{__type__:"Classify",derive:t}}()},{}],11:[function(e,t,r){"use strict";function n(e){function t(e){if(!i.isFunction(e))return void o.warn("Pushed a non-function into the command queue.");try{e()}catch(e){o.error("Error occurred while running the command queue."),o.error(e.stack)}}return function(){if(!i.isArray(e))return void o.warn("Queue passed in is not an array.");for(var t=0;t<e.length;t++)try{e[t]()}catch(e){o.error("Error occurred while running the command queue."),o.error(e.stack)}}(),{__type__:"CommandQueue",push:t}}var i=e(27),o=e(24);t.exports=n},{}],12:[function(e,t,r){"use strict";var n=e(13),i=e(18),o={PostGptLayer:function(e){var t=i.validate({type:"object",strict:!0,properties:{lineItemDisablerTargeting:{type:"object",properties:{key:{type:"string",minLength:1},value:{type:"array",minLength:1,items:{type:"string"}}}},globalTimeout:{type:"integer",gte:0},slotMapping:{type:"object"}}},e);return t.valid?null:t.format()},GptLayer:function(e){var t=i.validate({type:"object",properties:{globalTimeout:{type:"integer",gte:0},enableSingleRequest:{type:"boolean",optional:!0},disableInitialLoad:{type:"boolean",optional:!0},slotMapping:{optional:!0,type:"object",properties:{selectors:{type:"array",items:{type:["array","string"],minLength:1,items:{type:"string",minLength:1}}},filters:{type:"array",items:{type:"string",minLength:1}}}}}},e);return t.valid?null:t.format()},IdentityLayer:function(e,t){var r=i.validate({type:"object",strict:!0,properties:{timeout:{type:"integer",gte:0},partners:{type:"object",properties:{"*":{type:"object",properties:{configs:{type:"object"},enabled:{type:"boolean"}}}}}}},e);if(!r.valid)return r.format();for(var n in e.partners)if(e.partners.hasOwnProperty(n)&&-1===t.indexOf(n))return'Identity partner ID "'+n+'" is unrecognized';return null},PartnersLayer:function(e,t){var r=i.validate({type:"object",strict:!0,properties:{prefetchOnLoad:{optional:!0,type:"object",strict:!0,properties:{enabled:{type:"boolean"},configs:{optional:!0,type:"object",strict:!0,properties:{dynamic:{optional:!0,type:"object",strict:!0,properties:{var:{optional:!0,type:"string",minLength:1},slotMapping:{type:"object",strict:!0,properties:{style:{type:"string",eq:["ALL","SINGLE"]},selectors:{type:"array",minLength:1,items:{type:["array","string"],minLength:1,items:{type:"string",minLength:1}}},filters:{type:"array",items:{type:"string",minLength:1}}}}}},pageType:{optional:!0,type:"object",strict:!0,properties:{var:{optional:!0,type:"string",minLength:1},mapping:{type:"object",strict:!0,properties:{"*":{type:"array",items:{type:"string",minLength:1}}}}}},fixed:{optional:!0,type:"object",strict:!0,properties:{htSlotNames:{type:"array",items:{type:"string",minLength:1}}}}}}}},partners:{type:"object",properties:{"*":{type:"object",properties:{configs:{type:"object"},enabled:{type:"boolean"}}}}}}},e);if(!r.valid)return r.format();for(var n in e.partners)if(e.partners.hasOwnProperty(n)&&-1===t.indexOf(n))return'Partner ID "'+n+'" is unrecognized';return null},DirectBiddingLayer:function(e){var t=i.validate({type:"object",strict:!0,properties:{globalTimeout:{type:"integer",gte:0}}},e);return t.valid?null:t.format()},MediationLayer:function(e){var t=i.validate({type:"object",strict:!0,properties:{mediationLevel:{type:"string",eq:["NONE","HT_SLOT","PARTNER"]}}},e);return t.valid?null:t.format()},PreGptLayer:function(){return null},StorageLayer:function(){return null},ModuleLoader:function(e,t,r){var n=i.validate({type:"object",properties:{htSlots:{type:"object"},Services:{type:"object",properties:{"*":{type:"object"}}},Layers:{type:"array",minLength:1,items:{type:"object",properties:{layerId:{type:"string",minLength:1},configs:{type:"object"}}}}}},e);if(!n.valid)return n.format();for(var o in e.Services)if(-1===t.indexOf(o))return"members of `configs.Services` must be one of the predefined values in `ServiceConstructors`";for(var a=0;a<e.Layers.length;a++)if(-1===r.indexOf(e.Layers[a].layerId))return"`configs.Layers["+a+"].layerId` must be one of the predefined values in `LayerConstructors`";return null},HeaderTagSlot:function(e,t){var r=i.validate({type:"object",strict:!0,properties:{id:{type:"string"},divId:{optional:!0,type:"string"},adUnitPath:{optional:!0,type:"string"},sizeMapping:{optional:!0,type:"object",properties:{"*":{type:"array",minLength:1,items:{type:"array",exactLength:2,items:{type:"integer",gte:0}}}}},targeting:{optional:!0,type:"array",items:{type:"object",properties:{"*":{type:"array",minLength:1,items:{type:"string",minLength:1}}}}},deviceType:{optional:!0,type:"string",minLength:1},position:{type:"string",eq:["atf","btf"],optional:!0}}},e);if(!r.valid)return"Invalid config: "+r.format();if(r=i.validate({type:"string",minLength:1},t),!r.valid)return"Invalid ID: "+r.format();if(!e.hasOwnProperty("sizeMapping"))return'`config` must have property "sizeMapping"';var n=/^(\d+)x(\d+)$/,o=0;for(var a in e.sizeMapping)if(e.sizeMapping.hasOwnProperty(a)){if(!1===n.test(a))return"Keys of `config.sizeMapping` must be of form `widthxheight`";o++}return 0===o?"`config.sizeMapping` must not be empty":null},PartnerProfile:function(e,t,r){var o=i.validate({type:"object",strict:!0,properties:{profile:{type:"object",strict:!0,properties:{partnerId:{type:"string",minLength:1},namespace:{type:"string",minLength:1},statsId:{type:"string",minLength:1},version:{type:"string",minLength:1,optional:!0},targetingType:{type:"string",eq:["page","slot"]},bidUnitInCents:{type:"number",gt:0,optional:!0,exec:function(e,t){(t>1&&t%10!=0||t<1&&!/^0\.0*1$/.test(t.toString()))&&this.report("must be a power of 10")}},enabledAnalytics:{type:"object",properties:{"*":{type:"boolean"}}},features:{type:"object",properties:{"*":{type:"object",strict:!0,properties:{enabled:{type:"boolean"},value:{type:"any"}}},prefetchDisabled:{optional:!0,type:"object",strict:!0,properties:{enabled:{type:"boolean"}}}}},targetingKeys:{type:"object",strict:!0,properties:{id:{optional:!0,type:"string",minLength:1},om:{optional:!0,type:"string",minLength:1},pm:{optional:!0,type:"string",minLength:1},pmid:{optional:!0,type:"string",minLength:1},ybot_ad:{optional:!0,type:"string",minLength:1},ybot_size:{optional:!0,type:"string",minLength:1},ybot_cpm:{optional:!0,type:"string",minLength:1},ybot_slot:{optional:!0,type:"string",minLength:1},retargeter:{optional:!0,type:"string",minLength:1}}},lineItemType:{type:"integer",exec:function(e,t){var r=!1;for(var i in n.LineItemTypes)if(n.LineItemTypes.hasOwnProperty(i)&&n.LineItemTypes[i]===t){r=!0;break}r||this.report("must be one of the predefined values in `Constants.LineItemTypes`")}},callbackType:{type:"integer"},architecture:{type:"integer"},parseAfterTimeout:{type:"boolean",optional:!0},requestType:{type:"integer"}}},requiredResources:{type:["array","null"],items:{type:"string",minLength:1}},fns:{type:"object",exec:function(e,t){for(var r in t)t.hasOwnProperty(r)&&"function"!=typeof t[r]&&this.report(r+" must be a function, is "+typeof t[r]);t.hasOwnProperty("retriever")?(t.hasOwnProperty("parseResponse")||t.hasOwnProperty("generateRequestObj")||t.hasOwnProperty("adResponseCallback"))&&this.report("must either have retriever or the other three."):t.hasOwnProperty("parseResponse")||t.hasOwnProperty("generateRequestObj")||this.report("must either have retriever or the other three.")}}}},{profile:e,requiredResources:t,fns:r});return o.valid?null:o.format()},partnerBaseConfig:function(e){var t=i.validate({type:"object",properties:{timeout:{optional:!0,type:"integer",gte:0},xSlots:{type:"object",properties:{"*":{type:"object"}}},mapping:{type:"object",properties:{"*":{type:"array",items:{type:"string",minLength:1,exec:function(e,t){this.origin.xSlots&&!this.origin.xSlots.hasOwnProperty(t)&&this.report("`configs.mapping` must map htSlotsNames to partner slots defined in `configs.xSlots`")}}}}},targetingKeyOverride:{optional:!0,type:"object",properties:{"*":{type:"string",minLength:1}}},lineItemType:{type:"string",optional:!0,exec:function(e,t){t&&!n.LineItemTypes.hasOwnProperty(t)&&this.report(t+" must be one of the predefined values in `Constants.LineItemTypes`")}},bidTransformer:{type:"object",optional:!0,exec:function(e,t){if(t){var r=o.bidTransformerConfig(t);null!==r&&this.report(r)}}}}},e);return t.valid?null:t.format()},bidTransformerConfig:function(e){var t=i.validate({type:"object",optional:!0,strict:!0,properties:{bidUnitInCents:{type:"number",gt:0,optional:!0,exec:function(e,t){(t>1&&t%10!=0||t<1&&!/^0\.0*1$/.test(t.toString()))&&this.report("must be a power of 10")}},outputCentsDivisor:{type:"number",gt:0,optional:!0,exec:function(e,t){(t>1&&t%10!=0||t<1&&!/^0\.0*1$/.test(t.toString()))&&this.report("must be a power of 10")}},outputPrecision:{type:"integer",gte:-1,optional:!0},roundingType:{type:"string",eq:["NONE","FLOOR"],optional:!0},floor:{type:"integer",gte:0,optional:!0},buckets:{type:"array",minLenth:1,items:{type:"object",properties:{max:{type:["integer","string"],gt:0,exec:function(e,t){"string"==typeof t&&"infinity"!==t&&this.report('The only acceptable string for bucket max is "infinity". Please check your config.')}},step:{type:"integer",gt:0}}},optional:!0}},exec:function(e,t){if(t){if(t.hasOwnProperty("floor")&&!t.hasOwnProperty("buckets")||!t.hasOwnProperty("floor")&&t.hasOwnProperty("buckets"))return void this.report("`configs.floor` and `configs.buckets` must be configured together");if(t.hasOwnProperty("floor")&&t.hasOwnProperty("buckets"))for(var r=t.floor,n=0;n<t.buckets.length;n++){var i=t.buckets[n].max,o=t.buckets[n].step;if("infinity"===i&&(i=1/0),i<=r)return void this.report("`configs.buckets["+n+"].max` is not in ascending order");if(i!==1/0&&(i-r)%o!=0)return void this.report("`configs.buckets["+n+"].step` must evenly divide its range");r=i}}}},e);return t.valid?null:t.format()},EventsService:function(){return null},HeaderStatsService:function(e){var t=i.validate({type:"object",properties:{siteId:{type:"string",minLength:1},configId:{type:"string",minLength:1},options:{type:"object",properties:{auctionCycle:{type:"boolean"}}}}},e);return t.valid?null:t.format()},RenderService:function(e){var t=i.validate({type:"object",properties:{sizeRetargeting:{optional:!0,type:"object",properties:{"*":{type:"array",exactLength:2,items:{type:"integer"}}}}}},e);if(!t.valid)return t.format();if(e.sizeRetargeting)for(var r in e.sizeRetargeting)if(e.sizeRetargeting.hasOwnProperty(r)&&!/^[0-9]+x[0-9]+$/.test(r))return"Invalid sizeRetargeting key `"+r+"`, must be format `widthxheight`";return null},TimerService:function(){return null},ComplianceService:function(e){var t=i.validate({type:"object",strict:!0,properties:{gdprAppliesDefault:{type:"boolean"},timeout:{type:"integer",gte:0},customFn:{type:"string",optional:!0}}},e);return t.valid?null:t.format()},HtSlotMapper:function(e,t){var r=i.validate({type:"object",properties:{selectors:{type:"array",minLength:1,items:{type:["array","string"],minLength:1,items:{type:"string",minLength:1}}},filters:{type:"array",items:{type:"string",minLength:1}}}},e);if(!r.valid)return r.format();for(var n=0;n<e.selectors.length;n++){var o=e.selectors[n];if("string"==typeof o){if(-1===t.indexOf(o))return"Unrecognized selector `"+o+"`"}else for(var a=0;a<o.length;a++){var s=o[a];if(-1===t.indexOf(s))return"Unrecognized selector `"+s+"`"}}for(var u=0;u<e.filters.length;u++){var c=e.filters[u];if(-1===t.indexOf(c))return"Unrecognized filter `"+c+"`"}return null},DeviceTypeChecker:function(e){var t=i.validate({type:"object",strict:!0,properties:{method:{type:"string",eq:Object.keys(n.DeviceTypeMethods)},configs:{optional:!0,type:"object"}}},e);if(!t.valid)return t.format();if("REFERENCE"===e.method&&(t=i.validate({type:"object",strict:!0,properties:{reference:{type:"string",minLength:1}}},e.configs)),"SIZE_MAPPING"===e.method&&(t=i.validate({type:"object",strict:!0,properties:{sizeMapping:{type:"object",properties:{"*":{type:"string",minLength:1}}}}},e.configs),e.configs.hasOwnProperty("sizeMapping"))){var r=/^(\d+)x(\d+)$/,o=0;for(var a in e.configs.sizeMapping)if(e.configs.sizeMapping.hasOwnProperty(a)){if(!1===r.test(a))return"Keys of `configs.sizeMapping` must be of form `widthxheight`";o++}if(0===o)return"`configs.sizeMapping` must not be empty"}return t.valid?null:t.format()}};t.exports=o},{}],13:[function(e,t,r){"use strict";var n={DEFAULT_UID_LENGTH:8,MIN_BANNER_DIMENSION:1,MIN_BID_FLOOR:0,MIN_SITE_ID:0,DEFAULT_UID_CHARSET:"ALPHANUM",SESSION_ID_LENGTH:8,PUBKIT_AD_ID_LENGTH:16,RENDER_SERVICE_EXPIRY_SWEEP_TIMER:3e4,LineItemTypes:{ID_AND_SIZE:1,ID_AND_PRICE:2,CUSTOM:3},DeviceTypeMethods:{USER_AGENT:1,REFERENCE:2,SIZE_MAPPING:3},RequestArchitectures:{MRA:1,SRA:2},InitialLoadStates:{DISABLED:1,ENABLED:2},MediationLevels:{NONE:1,HT_SLOT:2,PARTNER:3}};t.exports=n},{}],14:[function(e,t,r){"use strict";function n(e){function t(){return s.mobile()?n.DeviceTypes.MOBILE:(s.tablet(),n.DeviceTypes.DESKTOP)}function r(){var t;try{t=eval(e.configs.reference)}catch(e){throw c.error(e.stack),a("INTERNAL_ERROR","DeviceTypeChecker: could not eval() `reference`.")}if(!o.isFunction(t)){if(o.isString(t))return t;throw a("INVALID_TYPE","DeviceTypeChecker: `reference` must refer to a function or a string")}try{return t()}catch(e){throw c.error(e.stack),a("INTERNAL_ERROR","DeviceTypeChecker: could not execute `reference` function.")}}function l(){switch(p){case i.DeviceTypeMethods.USER_AGENT:return t();case i.DeviceTypeMethods.REFERENCE:return r();default:return t()}}var p;return function(){var t=u.DeviceTypeChecker(e);if(t)throw a("INVALID_CONFIG",t);p=i.DeviceTypeMethods[e.method]||i.DeviceTypeMethods.USER_AGENT}(),{__type__:"DeviceTypeChecker",getDeviceType:l}}var i=e(13),o=e(27),a=e(28),s=e(16),u=e(12),c=e(24);n.isValidDeviceType=function(e){for(var t in n.DeviceTypes)if(n.DeviceTypes.hasOwnProperty(t)&&"TABLET"!==t&&e===n.DeviceTypes[t])return!0;return!1},n.DeviceTypes={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet"},t.exports=n},{}],15:[function(e,t,r){(function(e,n,i){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(e.async=e.async||{})}(this,function(r){"use strict";function o(e){return e}function a(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function s(e,t,r){return t=nt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=nt(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=r(s),a(e,this,u)}}function u(e){return function(){return e}}function c(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function l(e){var t=c(e)?ut.call(e):"";return t==it||t==ot||t==at}function p(e){return!!dt&&dt in e}function f(e){if(null!=e){try{return gt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function d(e){return!(!c(e)||p(e))&&(l(e)?It:vt).test(f(e))}function y(e,t){return null==e?void 0:e[t]}function g(e,t){var r=y(e,t);return d(r)?r:void 0}function h(e,t){return Nt(s(e,t,o),e+"")}function v(e){return h(function(t,r){var n=Ot(function(r,n){var i=this;return e(t,function(e,t){e.apply(i,r.concat([t]))},n)});return r.length?n.apply(this,r):n})}function m(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Dt}function b(e){return null!=e&&m(e.length)&&!l(e)}function _(){}function w(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}function I(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function S(e){return null!=e&&"object"==typeof e}function L(e){return S(e)&&Rt.call(e)==Pt}function T(){return!1}function A(e,t){return!!(t=null==t?Kt:t)&&("number"==typeof e||Wt.test(e))&&e>-1&&e%1==0&&e<t}function E(e){return S(e)&&m(e.length)&&!!Xt[Yt.call(e)]}function N(e,t){var r=Gt(e),n=!r&&qt(e),i=!r&&!n&&$t(e),o=!r&&!n&&!i&&or(e),a=r||n||i||o,s=a?I(e.length,String):[],u=s.length;for(var c in e)!t&&!sr.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||A(c,u))||s.push(c);return s}function O(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ur)}function D(e){if(!O(e))return cr(e);var t=[]
;for(var r in Object(e))pr.call(e,r)&&"constructor"!=r&&t.push(r);return t}function j(e){return b(e)?N(e):D(e)}function x(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function P(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function F(e){var t=j(e),r=-1,n=t.length;return function(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}function R(e){if(b(e))return x(e);var t=xt(e);return t?P(t):F(e)}function k(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function M(e){return function(t,r,n){function i(e,t){if(u-=1,e)s=!0,n(e);else{if(t===fr||s&&u<=0)return s=!0,n(null);o()}}function o(){for(;u<e&&!s;){var t=a();if(null===t)return s=!0,void(u<=0&&n(null));u+=1,r(t.value,t.key,k(i))}}if(n=w(n||_),e<=0||!t)return n(null);var a=R(t),s=!1,u=0;o()}}function C(e,t,r,n){M(t)(e,r,n)}function q(e,t){return function(r,n,i){return e(r,t,n,i)}}function G(e,t,r){function n(e){e?r(e):++o===a&&r(null)}r=w(r||_);var i=0,o=0,a=e.length;for(0===a&&r(null);i<a;i++)t(e[i],i,k(n))}function U(e){return function(t,r,n){return e(yr,t,r,n)}}function z(e,t,r,n){n=w(n||_),t=t||[];var i=[],o=0;e(t,function(e,t,n){var a=o++;r(e,function(e,t){i[a]=t,n(e)})},function(e){n(e,i)})}function V(e){return function(t,r,n,i){return e(M(r),t,n,i)}}function H(e){return Ot(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}c(n)&&"function"==typeof n.then?n.then(function(e){r(null,e)},function(e){r(e.message?e:new Error(e))}):r(null,n)})}function B(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););return e}function $(e,t){return e&&wr(e,t,j)}function K(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function W(e){return e!==e}function X(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function J(e,t,r){return t===t?X(e,t,r):K(e,W,r)}function Q(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Y(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Z(e){return"symbol"==typeof e||S(e)&&Ar.call(e)==Lr}function ee(e){if("string"==typeof e)return e;if(Gt(e))return Q(e,ee)+"";if(Z(e))return Or?Or.call(e):"";var t=e+"";return"0"==t&&1/e==-Er?"-0":t}function te(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}function re(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:te(e,t,r)}function ne(e,t){for(var r=e.length;r--&&J(t,e[r],0)>-1;);return r}function ie(e,t){for(var r=-1,n=e.length;++r<n&&J(t,e[r],0)>-1;);return r}function oe(e){return e.split("")}function ae(e){return Dr.test(e)}function se(e){return e.match(qr)||[]}function ue(e){return ae(e)?se(e):oe(e)}function ce(e){return null==e?"":ee(e)}function le(e,t,r){if((e=ce(e))&&(r||void 0===t))return e.replace(Gr,"");if(!e||!(t=ee(t)))return e;var n=ue(e),i=ue(t);return re(n,ie(n,i),ne(n,i)+1).join("")}function pe(e){return e=e.toString().replace(Hr,""),e=e.match(Ur)[2].replace(" ",""),e=e?e.split(zr):[],e=e.map(function(e){return le(e.replace(Vr,""))})}function fe(e,t){var r={};$(e,function(e,t){function n(t,r){var n=Q(i,function(e){return t[e]});n.push(r),e.apply(null,n)}var i;if(Gt(e))i=Y(e),e=i.pop(),r[t]=i.concat(i.length>0?n:e);else if(1===e.length)r[t]=e;else{if(i=pe(e),0===e.length&&0===i.length)throw new Error("autoInject task functions require explicit parameters.");i.pop(),r[t]=i.concat(n)}}),Ir(r,t)}function de(e){setTimeout(e,0)}function ye(e){return h(function(t,r){e(function(){t.apply(null,r)})})}function ge(){this.head=this.tail=null,this.length=0}function he(e,t){e.length=1,e.head=e.tail=t}function ve(e,t,r){function n(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(s.started=!0,Gt(e)||(e=[e]),0===e.length&&s.idle())return Kr(function(){s.drain()});for(var n=0,i=e.length;n<i;n++){var o={data:e[n],callback:r||_};t?s._tasks.unshift(o):s._tasks.push(o)}Kr(s.process)}function i(e){return h(function(t){o-=1;for(var r=0,n=e.length;r<n;r++){var i=e[r],u=J(a,i,0);u>=0&&a.splice(u),i.callback.apply(i,t),null!=t[0]&&s.error(t[0],i.data)}o<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()})}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var o=0,a=[],s={_tasks:new ge,concurrency:t,payload:r,saturated:_,unsaturated:_,buffer:t/4,empty:_,drain:_,error:_,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){s.drain=_,s._tasks.empty()},unshift:function(e,t){n(e,!0,t)},process:function(){for(;!s.paused&&o<s.concurrency&&s._tasks.length;){var t=[],r=[],n=s._tasks.length;s.payload&&(n=Math.min(n,s.payload));for(var u=0;u<n;u++){var c=s._tasks.shift();t.push(c),r.push(c.data)}0===s._tasks.length&&s.empty(),o+=1,a.push(t[0]),o===s.concurrency&&s.saturated();var l=k(i(t));e(r,l)}},length:function(){return s._tasks.length},running:function(){return o},workersList:function(){return a},idle:function(){return s._tasks.length+o===0},pause:function(){s.paused=!0},resume:function(){if(!1!==s.paused){s.paused=!1;for(var e=Math.min(s.concurrency,s._tasks.length),t=1;t<=e;t++)Kr(s.process)}}};return s}function me(e,t){return ve(e,1,t)}function be(e,t,r,n){n=w(n||_),Xr(e,function(e,n,i){r(t,e,function(e,r){t=r,i(e)})},function(e){n(e,t)})}function _e(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){n(e,i)})}function we(e,t,r){return function(n,i,o,a){function s(){a&&a(null,r(!1))}function u(e,n,i){if(!a)return i();o(e,function(n,s){a&&(n||t(s))?(n?a(n):a(n,r(!0,e)),a=o=!1,i(n,fr)):i()})}arguments.length>3?(a=a||_,e(n,i,u,s)):(a=o,a=a||_,o=i,e(n,u,s))}}function Ie(e,t){return t}function Se(e){return h(function(t,r){t.apply(null,r.concat([h(function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&B(r,function(t){console[e](t)}))})]))})}function Le(e,t,r){function n(t,n){return t?r(t):n?void e(i):r(null)}r=k(r||_);var i=h(function(e,i){if(e)return r(e);i.push(n),t.apply(this,i)});n(null,!0)}function Te(e,t,r){r=k(r||_);var n=h(function(i,o){return i?r(i):t.apply(this,o)?e(n):void r.apply(null,[null].concat(o))});e(n)}function Ae(e,t,r){Te(e,function(){return!t.apply(this,arguments)},r)}function Ee(e,t,r){function n(t){if(t)return r(t);e(i)}function i(e,i){return e?r(e):i?void t(n):r(null)}r=k(r||_),e(i)}function Ne(e){return function(t,r,n){return e(t,n)}}function Oe(e,t,r){yr(e,Ne(t),r)}function De(e,t,r,n){M(t)(e,Ne(r),n)}function je(e){return Ot(function(t,r){var n=!0;t.push(function(){var e=arguments;n?Kr(function(){r.apply(null,e)}):r.apply(null,e)}),e.apply(this,t),n=!1})}function xe(e){return!e}function Pe(e){return function(t){return null==t?void 0:t[e]}}function Fe(e,t,r,n){n=w(n||_);var i=[];e(t,function(e,t,n){r(e,function(r,o){r?n(r):(o&&i.push({index:t,value:e}),n())})},function(e){e?n(e):n(null,Q(i.sort(function(e,t){return e.index-t.index}),Pe("value")))})}function Re(e,t){function r(e){if(e)return n(e);i(r)}var n=k(t||_),i=je(e);r()}function ke(e,t,r,n){n=w(n||_);var i={};C(e,t,function(e,t,n){r(e,t,function(e,r){if(e)return n(e);i[t]=r,n()})},function(e){n(e,i)})}function Me(e,t){return t in e}function Ce(e,t){var r=Object.create(null),n=Object.create(null);t=t||o;var i=Ot(function(i,o){var a=t.apply(null,i);Me(r,a)?Kr(function(){o.apply(null,r[a])}):Me(n,a)?n[a].push(o):(n[a]=[o],e.apply(null,i.concat([h(function(e){r[a]=e;var t=n[a];delete n[a];for(var i=0,o=t.length;i<o;i++)t[i].apply(null,e)})])))});return i.memo=r,i.unmemoized=e,i}function qe(e,t,r){r=r||_;var n=b(t)?[]:{};e(t,function(e,t,r){e(h(function(e,i){i.length<=1&&(i=i[0]),n[t]=i,r(e)}))},function(e){r(e,n)})}function Ge(e,t){qe(yr,e,t)}function Ue(e,t,r){qe(M(t),e,r)}function ze(e,t){if(t=w(t||_),!Gt(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var r=0,n=e.length;r<n;r++)e[r](t)}function Ve(e,t,r,n){be(bn.call(e).reverse(),t,r,n)}function He(e){return Ot(function(t,r){return t.push(h(function(e,t){if(e)r(null,{error:e});else{var n=null;1===t.length?n=t[0]:t.length>1&&(n=t),r(null,{value:n})}})),e.apply(this,t)})}function Be(e,t,r,n){Fe(e,t,function(e,t){r(e,function(e,r){e?t(e):t(null,!r)})},n)}function $e(e){var t;return Gt(e)?t=Q(e,He):(t={},$(e,function(e,r){t[r]=He.call(this,e)})),t}function Ke(e,t,r){function n(){t(function(e){e&&s++<a.times&&("function"!=typeof a.errorFilter||a.errorFilter(e))?setTimeout(n,a.intervalFunc(s)):r.apply(null,arguments)})}var i=5,o=0,a={times:i,intervalFunc:u(o)};if(arguments.length<3&&"function"==typeof e?(r=t||_,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||i,e.intervalFunc="function"==typeof t.interval?t.interval:u(+t.interval||o),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||i}}(a,e),r=r||_),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=1;n()}function We(e,t){qe(Xr,e,t)}function Xe(e,t,r){function n(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}gr(e,function(e,r){t(e,function(t,n){if(t)return r(t);r(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);r(null,Q(t.sort(n),Pe("value")))})}function Je(e,t,r){function n(){s||(o.apply(null,arguments),clearTimeout(a))}function i(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),s=!0,o(n)}var o,a,s=!1;return Ot(function(r,s){o=s,a=setTimeout(i,t),e.apply(null,r.concat(n))})}function Qe(e,t,r,n){for(var i=-1,o=Nn(En((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}function Ye(e,t,r,n){vr(Qe(0,e,1),t,r,n)}function Ze(e,t,r,n){3===arguments.length&&(n=r,r=t,t=Gt(e)?[]:{}),n=w(n||_),yr(e,function(e,n,i){r(t,e,n,i)},function(e){n(e,t)})}function et(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function tt(e,t,r){if(r=k(r||_),!e())return r(null);var n=h(function(i,o){return i?r(i):e()?t(n):void r.apply(null,[null].concat(o))});t(n)}function rt(e,t,r){tt(function(){return!e.apply(this,arguments)},t,r)}var nt=Math.max,it="[object Function]",ot="[object GeneratorFunction]",at="[object Proxy]",st=Object.prototype,ut=st.toString,ct="object"==typeof n&&n&&n.Object===Object&&n,lt="object"==typeof self&&self&&self.Object===Object&&self,pt=ct||lt||Function("return this")(),ft=pt["__core-js_shared__"],dt=function(){var e=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),yt=Function.prototype,gt=yt.toString,ht=/[\\^$.*+?()[\]{}|]/g,vt=/^\[object .+?Constructor\]$/,mt=Function.prototype,bt=Object.prototype,_t=mt.toString,wt=bt.hasOwnProperty,It=RegExp("^"+_t.call(wt).replace(ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=function(){try{var e=g(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Lt=St?function(e,t){return St(e,"toString",{configurable:!0,enumerable:!1,value:u(t),writable:!0})}:o,Tt=500,At=16,Et=Date.now,Nt=function(e){var t=0,r=0;return function(){var n=Et(),i=At-(n-r);if(r=n,i>0){if(++t>=Tt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Lt),Ot=function(e){return h(function(t){var r=t.pop();e.call(this,t,r)})},Dt=9007199254740991,jt="function"==typeof Symbol&&Symbol.iterator,xt=function(e){return jt&&e[jt]&&e[jt]()},Pt="[object Arguments]",Ft=Object.prototype,Rt=Ft.toString,kt=Object.prototype,Mt=kt.hasOwnProperty,Ct=kt.propertyIsEnumerable,qt=L(function(){return arguments}())?L:function(e){return S(e)&&Mt.call(e,"callee")&&!Ct.call(e,"callee")},Gt=Array.isArray,Ut="object"==typeof r&&r&&!r.nodeType&&r,zt=Ut&&"object"==typeof t&&t&&!t.nodeType&&t,Vt=zt&&zt.exports===Ut,Ht=Vt?pt.Buffer:void 0,Bt=Ht?Ht.isBuffer:void 0,$t=Bt||T,Kt=9007199254740991,Wt=/^(?:0|[1-9]\d*)$/,Xt={};Xt["[object Float32Array]"]=Xt["[object Float64Array]"]=Xt["[object Int8Array]"]=Xt["[object Int16Array]"]=Xt["[object Int32Array]"]=Xt["[object Uint8Array]"]=Xt["[object Uint8ClampedArray]"]=Xt["[object Uint16Array]"]=Xt["[object Uint32Array]"]=!0,Xt["[object Arguments]"]=Xt["[object Array]"]=Xt["[object ArrayBuffer]"]=Xt["[object Boolean]"]=Xt["[object DataView]"]=Xt["[object Date]"]=Xt["[object Error]"]=Xt["[object Function]"]=Xt["[object Map]"]=Xt["[object Number]"]=Xt["[object Object]"]=Xt["[object RegExp]"]=Xt["[object Set]"]=Xt["[object String]"]=Xt["[object WeakMap]"]=!1;var Jt,Qt=Object.prototype,Yt=Qt.toString,Zt="object"==typeof r&&r&&!r.nodeType&&r,er=Zt&&"object"==typeof t&&t&&!t.nodeType&&t,tr=er&&er.exports===Zt,rr=tr&&ct.process,nr=function(){try{return rr&&rr.binding("util")}catch(e){}}(),ir=nr&&nr.isTypedArray,or=ir?function(e){return function(t){return e(t)}}(ir):E,ar=Object.prototype,sr=ar.hasOwnProperty,ur=Object.prototype,cr=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),lr=Object.prototype,pr=lr.hasOwnProperty,fr={},dr=q(C,1/0),yr=function(e,t,r){(b(e)?G:dr)(e,t,r)},gr=U(z),hr=v(gr),vr=V(z),mr=q(vr,1),br=v(mr),_r=h(function(e,t){return h(function(r){return e.apply(null,t.concat(r))})}),wr=function(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===r(o[u],u,o))break}return t}}(),Ir=function(e,t,r){function n(e,t){g.push(function(){s(e,t)})}function i(){if(0===g.length&&0===f)return r(null,p);for(;g.length&&f<t;){g.shift()()}}function o(e,t){var r=y[e];r||(r=y[e]=[]),r.push(t)}function a(e){B(y[e]||[],function(e){e()}),i()}function s(e,t){if(!d){var n=k(h(function(t,n){if(f--,n.length<=1&&(n=n[0]),t){var i={};$(p,function(e,t){i[t]=e}),i[e]=n,d=!0,y=[],r(t,i)}else p[e]=n,a(e)}));f++;var i=t[t.length-1];t.length>1?i(p,n):i(n)}}function u(t){var r=[];return $(e,function(e,n){Gt(e)&&J(e,t,0)>=0&&r.push(n)}),r}"function"==typeof t&&(r=t,t=null),r=w(r||_);var c=j(e),l=c.length;if(!l)return r(null);t||(t=l);var p={},f=0,d=!1,y={},g=[],v=[],m={};$(e,function(t,r){if(!Gt(t))return n(r,[t]),void v.push(r);var i=t.slice(0,t.length-1),a=i.length;if(0===a)return n(r,t),void v.push(r);m[r]=a,B(i,function(s){if(!e[s])throw new Error("async.auto task `"+r+"` has a non-existent dependency in "+i.join(", "));o(s,function(){0===--a&&n(r,t)})})}),function(){for(var e,t=0;v.length;)e=v.pop(),t++,B(u(e),function(e){0==--m[e]&&v.push(e)});if(t!==l)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),i()},Sr=pt.Symbol,Lr="[object Symbol]",Tr=Object.prototype,Ar=Tr.toString,Er=1/0,Nr=Sr?Sr.prototype:void 0,Or=Nr?Nr.toString:void 0,Dr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),jr="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",xr="\\ud83c[\\udffb-\\udfff]",Pr="(?:\\ud83c[\\udde6-\\uddff]){2}",Fr="[\\ud800-\\udbff][\\udc00-\\udfff]",Rr="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",kr="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Pr,Fr].join("|")+")[\\ufe0e\\ufe0f]?"+Rr+")*",Mr="[\\ufe0e\\ufe0f]?"+Rr+kr,Cr="(?:"+["[^\\ud800-\\udfff]"+jr+"?",jr,Pr,Fr,"[\\ud800-\\udfff]"].join("|")+")",qr=RegExp(xr+"(?="+xr+")|"+Cr+Mr,"g"),Gr=/^\s+|\s+$/g,Ur=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,zr=/,/,Vr=/(=.+)?(\s*)$/,Hr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Br="function"==typeof i&&i,$r="object"==typeof e&&"function"==typeof e.nextTick;Jt=Br?i:$r?e.nextTick:de;var Kr=ye(Jt);ge.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},ge.prototype.empty=ge,ge.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},ge.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},ge.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):he(this,e)},ge.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):he(this,e)},ge.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ge.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var Wr,Xr=q(C,1),Jr=h(function(e){return h(function(t){var r=this,n=t[t.length-1];"function"==typeof n?t.pop():n=_,be(e,t,function(e,t,n){t.apply(r,e.concat([h(function(e,t){n(e,t)})]))},function(e,t){n.apply(r,[e].concat(t))})})}),Qr=h(function(e){return Jr.apply(null,e.reverse())}),Yr=U(_e),Zr=function(e){return function(t,r,n){return e(Xr,t,r,n)}}(_e),en=h(function(e){var t=[null].concat(e);return Ot(function(e,r){return r.apply(this,t)})}),tn=we(yr,o,Ie),rn=we(C,o,Ie),nn=we(Xr,o,Ie),on=Se("dir"),an=q(De,1),sn=we(yr,xe,xe),un=we(C,xe,xe),cn=q(un,1),ln=U(Fe),pn=V(Fe),fn=q(pn,1),dn=Se("log"),yn=q(ke,1/0),gn=q(ke,1);Wr=$r?e.nextTick:Br?i:de;var hn=ye(Wr),vn=function(e,t){return ve(function(t,r){e(t[0],r)},t,1)},mn=function(e,t){var r=vn(e,t);return r.push=function(e,t,n){if(null==n&&(n=_),"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,Gt(e)||(e=[e]),0===e.length)return Kr(function(){r.drain()});t=t||0;for(var i=r._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,a=e.length;o<a;o++){var s={data:e[o],priority:t,callback:n};i?r._tasks.insertBefore(i,s):r._tasks.push(s)}Kr(r.process)},delete r.unshift,r},bn=Array.prototype.slice,_n=U(Be),wn=V(Be),In=q(wn,1),Sn=function(e,t){return t||(t=e,e=null),Ot(function(r,n){function i(e){t.apply(null,r.concat([e]))}e?Ke(e,i,n):Ke(i,n)})},Ln=we(yr,Boolean,o),Tn=we(C,Boolean,o),An=q(Tn,1),En=Math.ceil,Nn=Math.max,On=q(Ye,1/0),Dn=q(Ye,1),jn=function(e,t){function r(i){if(n===e.length)return t.apply(null,[null].concat(i));var o=k(h(function(e,n){if(e)return t.apply(null,[e].concat(n));r(n)}));i.push(o),e[n++].apply(null,i)}if(t=w(t||_),!Gt(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;r([])},xn={applyEach:hr,applyEachSeries:br,apply:_r,asyncify:H,auto:Ir,autoInject:fe,cargo:me,compose:Qr,concat:Yr,concatSeries:Zr,constant:en,detect:tn,detectLimit:rn,detectSeries:nn,dir:on,doDuring:Le,doUntil:Ae,doWhilst:Te,during:Ee,each:Oe,eachLimit:De,eachOf:yr,eachOfLimit:C,eachOfSeries:Xr,eachSeries:an,ensureAsync:je,every:sn,everyLimit:un,everySeries:cn,filter:ln,filterLimit:pn,filterSeries:fn,forever:Re,log:dn,map:gr,mapLimit:vr,mapSeries:mr,mapValues:yn,mapValuesLimit:ke,mapValuesSeries:gn,memoize:Ce,nextTick:hn,parallel:Ge,parallelLimit:Ue,priorityQueue:mn,queue:vn,race:ze,reduce:be,reduceRight:Ve,reflect:He,reflectAll:$e,reject:_n,rejectLimit:wn,rejectSeries:In,retry:Ke,retryable:Sn,seq:Jr,series:We,setImmediate:Kr,some:Ln,someLimit:Tn,someSeries:An,sortBy:Xe,timeout:Je,times:On,timesLimit:Ye,timesSeries:Dn,transform:Ze,unmemoize:et,until:rt,waterfall:jn,whilst:tt,all:sn,any:Ln,forEach:Oe,forEachSeries:an,forEachLimit:De,forEachOf:yr,forEachOfSeries:Xr,forEachOfLimit:C,inject:be,foldl:be,foldr:Ve,select:ln,selectLimit:pn,selectSeries:fn,wrapSync:H};r.default=xn,r.applyEach=hr,r.applyEachSeries=br,r.apply=_r,r.asyncify=H,r.auto=Ir,r.autoInject=fe,r.cargo=me,r.compose=Qr,r.concat=Yr,r.concatSeries=Zr,r.constant=en,r.detect=tn,r.detectLimit=rn,r.detectSeries=nn,r.dir=on,r.doDuring=Le,r.doUntil=Ae,r.doWhilst=Te,r.during=Ee,r.each=Oe,r.eachLimit=De,r.eachOf=yr,r.eachOfLimit=C,r.eachOfSeries=Xr,r.eachSeries=an,r.ensureAsync=je,r.every=sn,r.everyLimit=un,r.everySeries=cn,r.filter=ln,r.filterLimit=pn,r.filterSeries=fn,r.forever=Re,r.log=dn,r.map=gr,r.mapLimit=vr,r.mapSeries=mr,r.mapValues=yn,r.mapValuesLimit=ke,r.mapValuesSeries=gn,r.memoize=Ce,r.nextTick=hn,r.parallel=Ge,r.parallelLimit=Ue,r.priorityQueue=mn,r.queue=vn,r.race=ze,r.reduce=be,r.reduceRight=Ve,r.reflect=He,r.reflectAll=$e,r.reject=_n,r.rejectLimit=wn,r.rejectSeries=In,r.retry=Ke,r.retryable=Sn,r.seq=Jr,r.series=We,r.setImmediate=Kr,r.some=Ln,r.someLimit=Tn,r.someSeries=An,r.sortBy=Xe,r.timeout=Je,r.times=On,r.timesLimit=Ye,r.timesSeries=Dn,r.transform=Ze,r.unmemoize=et,r.until=rt,r.waterfall=jn,r.whilst=tt,r.all=sn,r.allLimit=un,r.allSeries=cn,r.any=Ln,r.anyLimit=Tn,r.anySeries=An,r.find=tn,r.findLimit=rn,r.findSeries=nn,r.forEach=Oe,r.forEachSeries=an,r.forEachLimit=De,r.forEachOf=yr,r.forEachOfSeries=Xr,r.forEachOfLimit=C,r.inject=be,r.foldl=be,r.foldr=Ve,r.select=ln,r.selectLimit=pn,r.selectSeries=fn,r.wrapSync=H,Object.defineProperty(r,"__esModule",{value:!0})})}).call(this,e(2),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e(3).setImmediate)},{}],16:[function(e,t,r){"use strict";var n,i,o;n={},o=window.navigator.userAgent.toLowerCase(),n.ios=function(){return n.iphone()||n.ipod()||n.ipad()},n.iphone=function(){return!n.windows()&&i("iphone")},n.ipod=function(){return i("ipod")},n.ipad=function(){return i("ipad")},n.android=function(){return!n.windows()&&i("android")},n.androidPhone=function(){return n.android()&&i("mobile")},n.androidTablet=function(){return n.android()&&!i("mobile")},n.blackberry=function(){return i("blackberry")||i("bb10")||i("rim")},n.blackberryPhone=function(){return n.blackberry()&&!i("tablet")},n.blackberryTablet=function(){return n.blackberry()&&i("tablet")},n.windows=function(){return i("windows")},n.windowsPhone=function(){return n.windows()&&i("phone")},n.windowsTablet=function(){return n.windows()&&i("touch")&&!n.windowsPhone()},n.fxos=function(){return(i("(mobile;")||i("(tablet;"))&&i("; rv:")},n.fxosPhone=function(){return n.fxos()&&i("mobile")},n.fxosTablet=function(){return n.fxos()&&i("tablet")},n.meego=function(){return i("meego")},n.mobile=function(){return n.androidPhone()||n.iphone()||n.ipod()||n.windowsPhone()||n.blackberryPhone()||n.fxosPhone()||n.meego()},n.tablet=function(){return n.ipad()||n.androidTablet()||n.blackberryTablet()||n.windowsTablet()||n.fxosTablet()},n.desktop=function(){return!n.tablet()&&!n.mobile()},i=function(e){return-1!==o.indexOf(e)},t.exports=n},{}],17:[function(e,t,r){function n(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0;var r=1===e._state?t.onFulfilled:t.onRejected;if(null===r)return void(1===e._state?a:s)(t.promise,e._value);var n;try{n=r(e._value)}catch(e){return void s(t.promise,e)}a(t.promise,n)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof i)return e._state=3,e._value=t,void u(e);if("function"==typeof r)return void l(bind(r,t),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){for(var t=0,r=e._deferreds.length;t<r;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function l(e,t){var r=!1;try{e(function(e){r||(r=!0,a(t,e))},function(e){r||(r=!0,s(t,e))})}catch(e){if(r)return;r=!0,s(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new c(e,t,r)),r},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,r){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){n(o,e)},r)}t[o]=a,0==--i&&e(t)}catch(e){r(e)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)n(o,t[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,r){r(e)})},i.defer=function(){var e={};return e.promise=new i(function(t,r){e.resolve=t,e.reject=r}),e},t.exports=i},{}],18:[function(e,t,r){!function(){function r(e,t){if(!t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function n(){var e={},t=Array.prototype.slice.call(arguments),r=null,n=null;return t.forEach(function(t){if(t&&t.constructor===Object)for(r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]]}),e}function i(){this.custom={},this.extend=function(e){return r(this.custom,e)},this.reset=function(){this.custom={}},this.remove=function(e){g.array(e)||(e=[e]),e.forEach(function(e){delete this.custom[e]},this)}}function o(e,t){var r=["@"];if(this._schema=e,this._custom={},null!=t)for(var n in t)t.hasOwnProperty(n)&&(this._custom["$"+n]=t[n]);this._getDepth=function(){return r.length},this._dumpStack=function(){return r.map(function(e){return e.replace(/^\[/g,"")}).join(".").replace(/\.\u001b\u001c\u001d\u001e/g,"[")},this._deeperObject=function(e){return r.push(/^[a-z$_][a-z0-9$_]*$/i.test(e)?e:'["'+e+'"]'),this},this._deeperArray=function(e){return r.push("["+e+"]"),this},this._back=function(){return r.pop(),this}}function a(e,t){return"function"==typeof e?t instanceof e:(e=e in g?e:"any",g[e](t))}function s(e){for(var t in g)if(a(t,e))return"any"!==t?t:"an instance of "+e.constructor.name}function u(e,t){for(var r=[],n=e.indexOf(t);-1!==n;)r.push(n),n=e.indexOf(t,n+1);return r}function c(e,t){o.prototype.constructor.call(this,e,n(c.custom,t));var r=[];this._basicFields=Object.keys(v),this._customFields=Object.keys(this._custom),this.origin=null,this.report=function(e,t,n){var i={code:t||this.userCode||null,reason:n||"unknown",message:this.userError||e||"is invalid",property:this.userAlias?this.userAlias+" ("+this._dumpStack()+")":this._dumpStack()};return r.push(i),this},this.result=function(){return{error:r,valid:0===r.length,format:function(){return!0===this.valid?"Candidate is valid":this.error.map(function(e){return"Property "+e.property+": "+e.message}).join("\n")}}}}function l(e,t){o.prototype.constructor.call(this,e,n(l.custom,t));var r=[];this._basicFields=Object.keys(w),this._customFields=Object.keys(this._custom),this.origin=null,this.report=function(e){var t={message:e||"was sanitized",property:this.userAlias?this.userAlias+" ("+this._dumpStack()+")":this._dumpStack()};r.some(function(e){return e.property===t.property})||r.push(t)},this.result=function(e){return{data:e,reporting:r,format:function(){return this.reporting.map(function(e){return"Property "+e.property+" "+e.message}).join("\n")}}}}function p(e){var t=S,r=L;return null!=e.gte?t=e.gte:null!=e.gt&&(t=e.gt+1),null!=e.lte?r=e.lte:null!=e.lt&&(r=e.lt-1),{min:t,max:r}}function f(){}var d={};if(d.async="function"==typeof e?e(15):window.async,"object"!=typeof d.async)throw new Error("Module async is required (https://github.com/caolan/async)");var y=d.async,g={function:function(e){return"function"==typeof e},string:function(e){return"string"==typeof e},number:function(e){return"number"==typeof e&&!isNaN(e)},integer:function(e){return"number"==typeof e&&e%1==0},NaN:function(e){return"number"==typeof e&&isNaN(e)},boolean:function(e){return"boolean"==typeof e},null:function(e){return null===e},date:function(e){return null!=e&&e instanceof Date},object:function(e){return null!=e&&e.constructor===Object},array:function(e){return null!=e&&e.constructor===Array},any:function(e){return!0}},h={void:/^$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)?(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,"date-time":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?(Z?|(-|\+)\d{2}:\d{2})$/,date:/^\d{4}-\d{2}-\d{2}$/,coolDateTime:/^\d{4}(-|\/)\d{2}(-|\/)\d{2}(T| )\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/,time:/^\d{2}\:\d{2}\:\d{2}$/,color:/^#([0-9a-f])+$/i,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,numeric:/^[0-9]+$/,integer:/^\-?[0-9]+$/,decimal:/^\-?[0-9]*\.?[0-9]+$/,alpha:/^[a-z]+$/i,alphaNumeric:/^[a-z0-9]+$/i,alphaDash:/^[a-z0-9_-]+$/i,javascript:/^[a-z_\$][a-z0-9_\$]*$/i,upperString:/^[A-Z ]*$/,lowerString:/^[a-z ]*$/},v={optional:function(e,t){!0!==("boolean"==typeof e.optional?e.optional:"true"===e.optional)&&void 0===t&&this.report("is missing and not optional",null,"optional")},type:function(e,t){if(void 0!==t&&("string"==typeof e.type||e.type instanceof Array||"function"==typeof e.type)){var r=g.array(e.type)?e.type:[e.type];r.some(function(e){return a(e,t)})||(r=r.map(function(e){return"function"==typeof e?"and instance of "+e.name:e}),this.report("must be "+r.join(" or ")+", but is "+s(t),null,"type"))}},uniqueness:function(e,t){if("string"==typeof e.uniqueness&&(e.uniqueness="true"===e.uniqueness),"boolean"==typeof e.uniqueness&&!1!==e.uniqueness&&(g.array(t)||"string"==typeof t))for(var r=[],n=0;n<t.length;n++)if(!(r.indexOf(t[n])>=0)){var i=u(t,t[n]);i.length>1&&(r.push(t[n]),this.report("has value ["+t[n]+"] more than once at indexes ["+i.join(", ")+"]",null,"uniqueness"))}},pattern:function(e,t){var r=this,n=e.pattern;if("string"==typeof t){var i=!1;g.array(n)||(n=[n]),n.forEach(function(e){"string"==typeof e&&e in h&&(e=h[e]),e instanceof RegExp&&e.test(t)&&(i=!0)}),i||r.report("must match ["+n.join(" or ")+'], but is equal to "'+t+'"',null,"pattern")}},validDate:function(e,t){"true"===String(e.validDate)&&t instanceof Date&&isNaN(t.getTime())&&this.report("must be a valid date",null,"validDate")},minLength:function(e,t){if("string"==typeof t||g.array(t)){var r=Number(e.minLength);isNaN(r)||t.length<r&&this.report("must be longer than "+r+" elements, but it has "+t.length,null,"minLength")}},maxLength:function(e,t){if("string"==typeof t||g.array(t)){var r=Number(e.maxLength);isNaN(r)||t.length>r&&this.report("must be shorter than "+r+" elements, but it has "+t.length,null,"maxLength")}},exactLength:function(e,t){if("string"==typeof t||g.array(t)){var r=Number(e.exactLength);isNaN(r)||t.length!==r&&this.report("must have exactly "+r+" elements, but it have "+t.length,null,"exactLength")}},lt:function(e,t){var r=Number(e.lt);"number"!=typeof t||isNaN(r)||t>=r&&this.report("must be less than "+r+', but is equal to "'+t+'"',null,"lt")},lte:function(e,t){
var r=Number(e.lte);"number"!=typeof t||isNaN(r)||t>r&&this.report("must be less than or equal to "+r+', but is equal to "'+t+'"',null,"lte")},gt:function(e,t){var r=Number(e.gt);"number"!=typeof t||isNaN(r)||t<=r&&this.report("must be greater than "+r+', but is equal to "'+t+'"',null,"gt")},gte:function(e,t){var r=Number(e.gte);"number"!=typeof t||isNaN(r)||t<r&&this.report("must be greater than or equal to "+r+', but is equal to "'+t+'"',null,"gte")},eq:function(e,t){if("number"==typeof t||"string"==typeof t||"boolean"==typeof t){var r=e.eq;if("number"==typeof r||"string"==typeof r||"boolean"==typeof r||g.array(r))if(g.array(r)){for(var n=0;n<r.length;n++)if(t===r[n])return;this.report("must be equal to ["+r.map(function(e){return'"'+e+'"'}).join(" or ")+'], but is equal to "'+t+'"',null,"eq")}else t!==r&&this.report('must be equal to "'+r+'", but is equal to "'+t+'"',null,"eq")}},ne:function(e,t){if("number"==typeof t||"string"==typeof t){var r=e.ne;if("number"==typeof r||"string"==typeof r||g.array(r))if(g.array(r)){for(var n=0;n<r.length;n++)if(t===r[n])return void this.report('must not be equal to "'+r[n]+'"',null,"ne")}else t===r&&this.report('must not be equal to "'+r+'"',null,"ne")}},someKeys:function(e,t){var r=e.someKeys;if(g.object(t)){r.some(function(e){return e in t})||this.report("must have at least key "+r.map(function(e){return'"'+e+'"'}).join(" or "),null,"someKeys")}},strict:function(e,t){if("string"==typeof e.strict&&(e.strict="true"===e.strict),!0===e.strict&&g.object(t)&&g.object(e.properties)){var r=this;if(void 0===e.properties["*"]){var n=Object.keys(t).filter(function(t){return void 0===e.properties[t]});if(n.length>0){var i="should not contains "+(n.length>1?"properties":"property")+" ["+n.map(function(e){return'"'+e+'"'}).join(", ")+"]";r.report(i,null,"strict")}}}},exec:function(e,t,r){var n=this;if("function"==typeof r)return this.asyncExec(e,t,r);(g.array(e.exec)?e.exec:[e.exec]).forEach(function(r){"function"==typeof r&&r.call(n,e,t)})},properties:function(e,t,r){if("function"==typeof r)return this.asyncProperties(e,t,r);if(e.properties instanceof Object&&t instanceof Object){var n,i=e.properties;if(null!=i["*"])for(n in t)n in i||(this._deeperObject(n),this._validate(i["*"],t[n]),this._back());for(n in i)"*"!==n&&(this._deeperObject(n),this._validate(i[n],t[n]),this._back())}},items:function(e,t,r){if("function"==typeof r)return this.asyncItems(e,t,r);if(e.items instanceof Object&&t instanceof Object){var n,i,o=e.items;if(g.array(o)&&g.array(t))for(n=0,i=o.length;n<i;n++)this._deeperArray(n),this._validate(o[n],t[n]),this._back();else for(var a in t)t.hasOwnProperty(a)&&(this._deeperArray(a),this._validate(o,t[a]),this._back())}}},m={asyncExec:function(e,t,r){var n=this;y.eachSeries(g.array(e.exec)?e.exec:[e.exec],function(r,i){if("function"==typeof r){if(r.length>2)return r.call(n,e,t,i);r.call(n,e,t)}y.nextTick(i)},r)},asyncProperties:function(e,t,r){if(!(e.properties instanceof Object&&g.object(t)))return r();var n=this,i=e.properties;y.series([function(e){if(null==i["*"])return e();y.eachSeries(Object.keys(t),function(e,r){if(e in i)return y.nextTick(r);n._deeperObject(e),n._asyncValidate(i["*"],t[e],function(e){n._back(),r(e)})},e)},function(e){y.eachSeries(Object.keys(i),function(e,r){if("*"===e)return y.nextTick(r);n._deeperObject(e),n._asyncValidate(i[e],t[e],function(e){n._back(),r(e)})},e)}],r)},asyncItems:function(e,t,r){if(!(e.items instanceof Object&&t instanceof Object))return r();var n=this,i=e.items;g.array(i)&&g.array(t)?y.timesSeries(i.length,function(e,r){n._deeperArray(e),n._asyncValidate(i[e],t[e],function(e,t){n._back(),r(e,t)}),n._back()},r):y.eachSeries(Object.keys(t),function(e,r){n._deeperArray(e),n._asyncValidate(i,t[e],function(e,t){n._back(),r(e,t)})},r)}};r(c.prototype,v),r(c.prototype,m),r(c,new i),c.prototype.validate=function(e,t){if(this.origin=e,"function"==typeof t){var r=this;return y.nextTick(function(){r._asyncValidate(r._schema,e,function(e){r.origin=null,t(e,r.result())})})}return this._validate(this._schema,e).result()},c.prototype._validate=function(e,t,r){return this.userCode=e.code||null,this.userError=e.error||null,this.userAlias=e.alias||null,this._basicFields.forEach(function(r){(r in e||"optional"===r)&&"function"==typeof this[r]&&this[r](e,t)},this),this._customFields.forEach(function(r){r in e&&"function"==typeof this._custom[r]&&this._custom[r].call(this,e,t)},this),this},c.prototype._asyncValidate=function(e,t,r){var n=this;this.userCode=e.code||null,this.userError=e.error||null,this.userAlias=e.alias||null,y.series([function(r){y.eachSeries(Object.keys(v),function(r,i){y.nextTick(function(){if((r in e||"optional"===r)&&"function"==typeof n[r]){if(n[r].length>2)return n[r](e,t,i);n[r](e,t)}i()})},r)},function(r){y.eachSeries(Object.keys(n._custom),function(r,i){y.nextTick(function(){if(r in e&&"function"==typeof n._custom[r]){if(n._custom[r].length>2)return n._custom[r].call(n,e,t,i);n._custom[r].call(n,e,t)}i()})},r)}],r)};var b={number:function(e,t){var r;if("number"==typeof e)return e;if(""===e)return void 0!==t.def?t.def:null;if("string"==typeof e){if("number"==typeof(r=parseFloat(e.replace(/,/g,".").replace(/ /g,""))))return r}else if(e instanceof Date)return+e;return null},integer:function(e,t){var r;if("number"==typeof e&&e%1==0)return e;if(""===e)return void 0!==t.def?t.def:null;if("string"==typeof e){if("number"==typeof(r=parseInt(e.replace(/ /g,""),10)))return r}else{if("number"==typeof e)return parseInt(e,10);if("boolean"==typeof e)return e?1:0;if(e instanceof Date)return+e}return null},string:function(e,t){return"boolean"==typeof e||"number"==typeof e||e instanceof Date?e.toString():g.array(e)?t.items||t.properties?e:e.join(String(t.joinWith||",")):e instanceof Object?t.items||t.properties?e:JSON.stringify(e):"string"==typeof e&&e.length?e:null},date:function(e,t){if(e instanceof Date)return e;var r=new Date(e);return isNaN(r.getTime())?null:r},boolean:function(e,t){return void 0===e?null:("string"!=typeof e||"false"!==e.toLowerCase())&&!!e},object:function(e,t){if("string"!=typeof e||g.object(e))return e;try{return JSON.parse(e)}catch(e){return null}},array:function(e,t){if(g.array(e))return e;if(void 0===e)return null;if("string"==typeof e){if("["===e.substring(0,1)&&"]"===e.slice(-1))try{return JSON.parse(e)}catch(e){return null}return e.split(String(t.splitWith||","))}return g.array(e)?null:[e]}},_={upper:function(e){return e.toUpperCase()},lower:function(e){return e.toLowerCase()},title:function(e){return e.replace(/\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},trim:function(e){return e.trim()}},w={strict:function(e,t){if("string"==typeof e.strict&&(e.strict="true"===e.strict),!0!==e.strict)return t;if(!g.object(e.properties))return t;if(!g.object(t))return t;return Object.keys(t).forEach(function(r){r in e.properties||delete t[r]}),t},optional:function(e,t){return!0===("boolean"==typeof e.optional?e.optional:"false"!==e.optional)?t:void 0!==t?t:(this.report(),e.def===Date?new Date:e.def)},type:function(e,t){if("string"!=typeof e.type||"function"!=typeof b[e.type])return t;var r,n="boolean"!=typeof e.optional||e.optional;return"function"==typeof b[e.type]?(null===(r=b[e.type](t,e))&&!n||!r&&isNaN(r)||null===r&&"string"===e.type)&&(r=e.def):n||(r=e.def),(null!=r||void 0!==e.def&&e.def===r)&&r!==t?(this.report(),r):t},rules:function(e,t){var r=e.rules;if("string"!=typeof t||"string"!=typeof r&&!g.array(r))return t;var n=!1;return(g.array(r)?r:[r]).forEach(function(e){"function"==typeof _[e]&&(t=_[e](t),n=!0)}),n&&this.report(),t},min:function(e,t){var r=Number(t);if(isNaN(r))return t;var n=Number(e.min);return isNaN(n)?t:r<n?(this.report(),n):t},max:function(e,t){var r=Number(t);if(isNaN(r))return t;var n=Number(e.max);return isNaN(n)?t:r>n?(this.report(),n):t},minLength:function(e,t){var r=Number(e.minLength);if("string"!=typeof t||isNaN(r)||r<0)return t;var n="",i=r-t.length;if(i>0){for(var o=0;o<i;o++)n+="-";return this.report(),t+n}return t},maxLength:function(e,t){var r=Number(e.maxLength);return"string"!=typeof t||isNaN(r)||r<0?t:t.length>r?(this.report(),t.slice(0,r)):t},properties:function(e,t,r){if("function"==typeof r)return this.asyncProperties(e,t,r);if(!t||"object"!=typeof t)return t;var n,i,o=e.properties;if(void 0!==o["*"])for(i in t)i in o||(this._deeperObject(i),n=this._sanitize(e.properties["*"],t[i]),void 0!==n&&(t[i]=n),this._back());for(i in e.properties)"*"!==i&&(this._deeperObject(i),n=this._sanitize(e.properties[i],t[i]),void 0!==n&&(t[i]=n),this._back());return t},items:function(e,t,r){if("function"==typeof r)return this.asyncItems(e,t,r);if(!(e.items instanceof Object&&t instanceof Object))return t;var n;if(g.array(e.items)&&g.array(t)){var i=e.items.length<t.length?e.items.length:t.length;for(n=0;n<i;n++)this._deeperArray(n),t[n]=this._sanitize(e.items[n],t[n]),this._back()}else for(n in t)t.hasOwnProperty(n)&&(this._deeperArray(n),t[n]=this._sanitize(e.items,t[n]),this._back());return t},exec:function(e,t,r){return"function"==typeof r?this.asyncExec(e,t,r):((g.array(e.exec)?e.exec:[e.exec]).forEach(function(r){"function"==typeof r&&(t=r.call(this,e,t))},this),t)}},I={asyncExec:function(e,t,r){var n=this,i=g.array(e.exec)?e.exec:[e.exec];y.eachSeries(i,function(r,i){if("function"==typeof r){if(r.length>2)return r.call(n,e,t,function(e,r){if(e)return i(e);t=r,i()});t=r.call(n,e,t)}i()},function(e){r(e,t)})},asyncProperties:function(e,t,r){if(!t||"object"!=typeof t)return r(null,t);var n=this,i=e.properties;y.series([function(e){if(null==i["*"])return e();var r=i["*"];y.eachSeries(Object.keys(t),function(e,o){if(e in i)return o();n._deeperObject(e),n._asyncSanitize(r,t[e],function(r,i){void 0!==i&&(t[e]=i),n._back(),o()})},e)},function(e){y.eachSeries(Object.keys(i),function(e,r){if("*"===e)return r();n._deeperObject(e),n._asyncSanitize(i[e],t[e],function(i,o){if(i)return r(i);void 0!==o&&(t[e]=o),n._back(),r()})},e)}],function(e){return r(e,t)})},asyncItems:function(e,t,r){if(!(e.items instanceof Object&&t instanceof Object))return r(null,t);var n=this,i=e.items;if(g.array(i)&&g.array(t)){var o=i.length<t.length?i.length:t.length;y.timesSeries(o,function(e,r){n._deeperArray(e),n._asyncSanitize(i[e],t[e],function(i,o){if(i)return r(i);t[e]=o,n._back(),r()})},function(e){r(e,t)})}else y.eachSeries(Object.keys(t),function(e,r){n._deeperArray(e),n._asyncSanitize(i,t[e],function(i,o){if(i)return r();t[e]=o,n._back(),r()})},function(e){r(e,t)});return t}};r(l.prototype,w),r(l.prototype,I),r(l,new i),l.prototype.sanitize=function(e,t){if(this.origin=e,"function"==typeof t){var r=this;return this._asyncSanitize(this._schema,e,function(e,n){r.origin=null,t(e,r.result(n))})}var n=this._sanitize(this._schema,e);return this.origin=null,this.result(n)},l.prototype._sanitize=function(e,t){return this.userAlias=e.alias||null,this._basicFields.forEach(function(r){(r in e||"optional"===r)&&"function"==typeof this[r]&&(t=this[r](e,t))},this),this._customFields.forEach(function(r){r in e&&"function"==typeof this._custom[r]&&(t=this._custom[r].call(this,e,t))},this),t},l.prototype._asyncSanitize=function(e,t,r){var n=this;this.userAlias=e.alias||null,y.waterfall([function(r){y.reduce(n._basicFields,t,function(t,r,i){y.nextTick(function(){if((r in e||"optional"===r)&&"function"==typeof n[r]){if(n[r].length>2)return n[r](e,t,i);t=n[r](e,t)}i(null,t)})},r)},function(t,r){y.reduce(n._customFields,t,function(t,r,i){y.nextTick(function(){if(r in e&&"function"==typeof n._custom[r]){if(n._custom[r].length>2)return n._custom[r].call(n,e,t,i);t=n._custom[r].call(n,e,t)}i(null,t)})},r)}],r)};var S=-2147483648,L=2147483647,T={int:function(e,t){return e+(0|Math.random()*(t-e+1))},float:function(e,t){return Math.random()*(t-e)+e},bool:function(){return Math.random()>.5},char:function(e,t){return String.fromCharCode(this.int(e,t))},fromList:function(e){return e[this.int(0,e.length-1)]}},A={"date-time":function(){return(new Date).toISOString()},date:function(){return(new Date).toISOString().replace(/T.*$/,"")},time:function(){return(new Date).toLocaleTimeString({},{hour12:!1})},color:function(e,t){var r="#";e<1&&(e=1);for(var n=0,i=T.int(e,t);n<i;n++)r+=T.fromList("0123456789abcdefABCDEF");return r},numeric:function(){return""+T.int(0,L)},integer:function(){return!0===T.bool()?"-"+this.numeric():this.numeric()},decimal:function(){return this.integer()+"."+this.numeric()},alpha:function(e,t){var r="";e<1&&(e=1);for(var n=0,i=T.int(e,t);n<i;n++)r+=T.fromList("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return r},alphaNumeric:function(e,t){var r="";e<1&&(e=1);for(var n=0,i=T.int(e,t);n<i;n++)r+=T.fromList("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");return r},alphaDash:function(e,t){var r="";e<1&&(e=1);for(var n=0,i=T.int(e,t);n<i;n++)r+=T.fromList("_-abcdefghijklmnopqrstuvwxyz_-ABCDEFGHIJKLMNOPQRSTUVWXYZ_-0123456789_-");return r},javascript:function(e,t){for(var r=T.fromList("_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$"),n=0,i=T.int(e,t-1);n<i;n++)r+=T.fromList("_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$0123456789_$");return r}},E={string:function(e){if(null!=e.eq)return e.eq;var t="",r=null!=e.minLength?e.minLength:0,n=null!=e.maxLength?e.maxLength:32;if("string"==typeof e.pattern&&"function"==typeof A[e.pattern])return A[e.pattern](r,n);for(var i=null!=e.exactLength?e.exactLength:T.int(r,n),o=0;o<i;o++)t+=T.char(32,126);return t},number:function(e){if(null!=e.eq)return e.eq;var t=p(e),r=T.float(t.min,t.max);if(null!=e.ne)for(var n=g.array(e.ne)?e.ne:[e.ne];-1!==n.indexOf(r);)r=T.float(t.min,t.max);return r},integer:function(e){if(null!=e.eq)return e.eq;var t=p(e),r=T.int(t.min,t.max);if(null!=e.ne)for(var n=g.array(e.ne)?e.ne:[e.ne];-1!==n.indexOf(r);)r=T.int(t.min,t.max);return r},boolean:function(e){return null!=e.eq?e.eq:T.bool()},null:function(e){return null},date:function(e){return null!=e.eq?e.eq:new Date},object:function(e){var t={},r=e.properties||{};for(var n in r)if(r.hasOwnProperty(n)){if(!0===r[n].optional&&!0===T.bool())continue;if("*"!==n)t[n]=this.generate(r[n]);else for(var i="__random_key_",o=i+0,a=T.int(1,9),s=1;s<=a;s++)o in r||(t[o]=this.generate(r[n])),o=i+s}return t},array:function(e){var t,r,n,i,o=this,a=e.items||{},s=null!=e.minLength?e.minLength:0,u=null!=e.maxLength?e.maxLength:16;if(g.array(a))for(n=a.length,null!=e.exactLength?n=e.exactLength:n<s?n=s:n>u&&(n=u),r=new Array(n),t=null,i=0;i<n;i++)t=a[i].type||"any",g.array(t)&&(t=t[T.int(0,t.length-1)]),r[i]=o[t](a[i]);else for(n=null!=e.exactLength?e.exactLength:T.int(s,u),r=new Array(n),t=a.type||"any",g.array(t)&&(t=t[T.int(0,t.length-1)]),i=0;i<n;i++)r[i]=o[t](a);return r},any:function(e){var t=Object.keys(E);return this[t[T.int(0,t.length-2)]](e)}};r(f.prototype,E);var N=null;f.instance=function(){return N instanceof f||(N=new f),N},f.prototype.generate=function(e){var t=e.type||"any";return g.array(t)&&(t=t[T.int(0,t.length-1)]),this[t](e)};var O={};void 0!==t&&t.exports?t.exports=O:window.SchemaInspector=O,O.newSanitization=function(e,t){return new l(e,t)},O.newValidation=function(e,t){return new c(e,t)},O.Validation=c,O.Sanitization=l,O.sanitize=function(e,t,r,n){return 3===arguments.length&&"function"==typeof r&&(n=r,r=null),new l(e,r).sanitize(t,n)},O.validate=function(e,t,r,n){return 3===arguments.length&&"function"==typeof r&&(n=r,r=null),new c(e,r).validate(t,n)},O.generate=function(e,t){if("number"==typeof t){for(var r=new Array(t),n=0;n<t;n++)r[n]=f.instance().generate(e);return r}return f.instance().generate(e)}}()},{}],19:[function(e,t,r){"use strict";t.exports=function(e){e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r={},n={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0"};if(n.browser&&(r[n.browser]=!0,r.version=n.version,r.versionNumber=parseInt(n.versionNumber,10)),r.rv||r.iemobile){n.browser="msie",r.msie=!0}if(r.edge){delete r.edge;n.browser="msedge",r.msedge=!0}if(r.opr){n.browser="opera",r.opera=!0}if(r.safari&&r.android){n.browser="android",r.android=!0}if(r.safari&&r.kindle){n.browser="kindle",r.kindle=!0}if(r.safari&&r.silk){n.browser="silk",r.silk=!0}return r.name=n.browser,r}(window.navigator.userAgent)},{}],20:[function(e,t,r){"use strict";var n=e(9),i=e(23),o=e(27),a=e(28),s=e(18),u=e(24);t.exports=function(){function e(e,t){var r=s.validate({type:"object",strict:!0,properties:{fn:{type:"function"},gpt:{type:"any",optional:!0}}},{fn:e,gpt:t});if(!r.valid)throw a("INVALID_ARGUMENT",r.format());if(!(t=t||window.googletag)||!t.cmd)return void u.warn("GPT is not loaded within the current scope.");t.cmd.push(e)}function t(e){var t=s.validate({type:"object",strict:!0,properties:{w:{type:"object",optional:!0}}},{w:e});if(!t.valid)throw a("INVALID_ARGUMENT",t.format());return e=e||window,e.googletag?(u.warn("GPT already loaded in this window scope."),e.googletag):(e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],i.jsonp({async:!0,url:n.getProtocol()+"//www.googletagservices.com/tag/js/gpt.js",windowScope:e}),e.googletag)}function r(e){return void 0===e?n.getNearestEntity("googletag"):n.traverseContextTree(function(e){return e.hasOwnProperty("googletag")?e.googletag:null},null,e,e)}function c(e){return o.isObject(e)&&o.isFunction(e.getSlotElementId)&&o.isFunction(e.setTargeting)&&o.isFunction(e.getTargeting)&&o.isFunction(e.clearTargeting)}function l(){return googletag.pubads().getSlots().slice()}function p(e){for(var t=l(),r=0;r<t.length;r++)if(t[r].getSlotElementId()===e)return t[r];return null}return{__type__:"GptHelper",run:e,loadGpt:t,getGpt:r,isGSlot:c,getGSlots:l,getGSlotByDivId:p}}()},{}],21:[function(e,t,r){"use strict";function n(e,t){function r(e,t){return Number(e)-Number(t)}function n(){return y}function s(){return g}function u(){return h}function c(){return v}function l(e,t){var n=a.validate({type:"object",properties:{clientWidth:{type:"integer",gte:0},clientHeight:{type:"integer",gte:0}}},{clientWidth:e,clientHeight:t});if(!n.valid)throw i("INVALID_ARGUMENT",n.format());var o,s,u,c,l=[];o=Object.keys(m).sort(r);for(var p=o.length-1;p>=0;p--)if(u=o[p],!(Number(u)>e)){s=Object.keys(m[u]).sort(r);for(var f=s.length-1;f>=0;f--)if(c=s[f],!(Number(c)>t)){l=m[u][c];break}if(l.length>0)break}return l}function p(){return b}function f(){return _}function d(){return w}var y,g,h,v,m,b,_,w;return function(){var r=o.HeaderTagSlot(t,e);if(r)throw i("INVALID_CONFIG",r);if(y=e,g=t.id,h=null,v=null,m=null,b=null,_=null,w=null,t.hasOwnProperty("divId")&&(h=RegExp(t.divId)),t.hasOwnProperty("adUnitPath")&&(v=RegExp(t.adUnitPath)),t.hasOwnProperty("sizeMapping")){var n,a,s,u=/^(\d+)x(\d+)$/;m={};for(var c in t.sizeMapping)t.sizeMapping.hasOwnProperty(c)&&(n=u.exec(c),a=n[1],s=n[2],m.hasOwnProperty(a)||(m[a]={}),m[a][s]=t.sizeMapping[c])}t.hasOwnProperty("targeting")&&(b=t.targeting),t.hasOwnProperty("deviceType")&&(_=t.deviceType),t.hasOwnProperty("position")&&(w=t.position),t=void 0}(),{__type__:"HeaderTagSlot",getName:n,getId:s,getDivId:u,getAdUnitPath:c,getSizes:l,getTargeting:p,getDeviceType:f,getPosition:d}}var i=e(28),o=e(12),a=e(18);t.exports=n},{}],22:[function(e,t,r){"use strict";function n(e){function t(e,t){var r=c.validate({type:"object",properties:{arrA:{type:"array",items:{type:"string"}},arrB:{type:"array",items:{type:"string"}}}},{arrA:e,arrB:t});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());for(var n=0;n<e.length;n++){var i,o;"!"===e[n].charAt(0)?(i=e[n].slice(1),o=!0):(i=e[n],o=!1);for(var a=!1,u=0;u<t.length;u++)if(i===t[u]){a=!0;break}if(o===a)return!1}return!0}function r(e,r){var n=c.validate({type:"object",properties:{obj1:{type:"object",properties:{"*":{type:"array",items:{type:"string"}}}},obj2:{type:"object",properties:{"*":{type:"array",items:{type:"string"}}}}}},{obj1:e,obj2:r});if(!n.valid)throw s("INVALID_ARGUMENT",n.format());for(var i in e)if(e.hasOwnProperty(i)){if(!r.hasOwnProperty(i))return!1;if(!t(e[i],r[i]))return!1}return!0}function n(e,t){var r=c.validate({type:"object",properties:{adSlot:{type:"object"},htSlot:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}},{adSlot:e,htSlot:t});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());for(var n=0;n<g.length;n++)if(0===g[n](e,t))return!1;return!0}function p(e,t,r){var n=c.validate({type:"object",properties:{adSlot:{type:"object"},htSlot:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}},selectorSet:{type:"array",minLength:1,items:{type:"function"}}}},{adSlot:e,htSlot:t,selectorSet:r});if(!n.valid)throw s("INVALID_ARGUMENT",n.format());for(var i=0;i<r.length;i++){if(r[i](e,t)<=0)return!1}return!0}function f(e,t){var r=c.validate({type:"object",properties:{adSlots:{type:"array",items:{type:"object"}},htSlots:{type:"array",items:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}}},{adSlots:t,htSlots:e});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());if(a.isEmpty(g))return e.slice();for(var i=[],o=0;o<e.length;o++)for(var u=0;u<t.length;u++)if(n(t[u],e[o])){i.push(e[o]);break}return i}function d(e,t){var r=c.validate({type:"object",properties:{adSlots:{type:"array",items:{type:"object",properties:{reference:{optional:!0,type:"any"}}}},htSlots:{type:"array",items:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}}},{adSlots:t,htSlots:e});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());if(a.isEmpty(e)||a.isEmpty(t))return[];for(var n=[],i=e.slice(),o=t.slice(),u=0;u<y.length;u++){for(var f=y[u],d=[],g=o.length-1;g>=0;g--){for(var h=[],v=-1,m=0;m<i.length;m++)if(p(o[g],i[m],f)){for(var b=[],_=0;_<f.length;_++){var w=f[_](o[g],i[m]);b.push(w)}for(var I=0;I<f.length;I++){if(!h[I]||b[I]>h[I]){h=b,v=m;break}if(b[I]<h[I])break}}if(v>=0){l.info('htSlot "'+i[v].getName()+'" mapped to adSlot "'+o[g].divId+'"');var S={};d[v]=!0,S.htSlot=i[v],o[g].firstPartyData&&(S.firstPartyData=o[g].firstPartyData),o[g].reference&&(S.ref=o[g].reference),n.push(S),o.splice(g,1)}}for(var L=i.length-1;L>=0;L--)d[L]&&i.splice(L,1)}return n}var y=[],g=[],h={divId:function(e,t){var r=c.validate({type:"object",properties:{adSlot:{type:"object",properties:{divId:{type:"string",minLength:1}}},htSlot:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}},{adSlot:e,htSlot:t});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());var n=t.getDivId();return n?n.test(e.divId)?1:0:-1},targeting:function(e,t){var n=c.validate({type:"object",properties:{adSlot:{type:"object",properties:{targeting:{type:"object",properties:{"*":{type:"array",items:{type:"string"}}}}}},htSlot:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}},{adSlot:e,htSlot:t});if(!n.valid)throw s("INVALID_ARGUMENT",n.format());var i=t.getTargeting(),o=e.targeting;if(!i)return-1;for(var u=!1,l=0,p=0;p<i.length;p++)if(i[p])if(a.isEmpty(i[p]))u=!0;else if(r(i[p],o)){var f=0;for(var d in i[p])i[p].hasOwnProperty(d)&&(f+=i[p][d].length);l=Math.max(l,f)}return u||l>0?l+1:0},size:function(e,t){var r=c.validate({type:"object",properties:{adSlot:{type:"object",properties:{sizes:{type:"array",minLength:1,items:{type:"array",exactLength:2,items:{type:"integer",gte:0}}}}},htSlot:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}},{adSlot:e,htSlot:t});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());var n=t.getSizes(i.getViewportWidth(),i.getViewportHeight());if(!n)return-1;for(var o=0,a=0;a<n.length;a++){for(var u=0,l=0;l<e.sizes.length;l++)if(n[a][0]===e.sizes[l][0]&&n[a][1]===e.sizes[l][1]){u++;break}if(0===u)return 0;o+=u}return 0===o?0:Math.ceil(100*o/e.sizes.length)},deviceType:function(e,t){var r=c.validate({type:"object",properties:{adSlot:{type:"object"},htSlot:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}},{adSlot:e,htSlot:t});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());var n=t.getDeviceType();return n?n===o.DeviceTypeChecker.getDeviceType()?1:0:-1},adUnitPath:function(e,t){var r=c.validate({type:"object",properties:{adSlot:{type:"object",properties:{adUnitPath:{type:"string",minLength:1}}},htSlot:{type:"object",properties:{__type__:{type:"string",eq:"HeaderTagSlot"}}}}},{adSlot:e,htSlot:t});if(!r.valid)throw s("INVALID_ARGUMENT",r.format());var n=t.getAdUnitPath();return n?n.test(e.adUnitPath)?1:0:-1}};return function(){var t=u.HtSlotMapper(e,Object.keys(h));if(t)throw s("INVALID_CONFIG",t);for(var r=0;r<e.filters.length;r++){if(!h.hasOwnProperty(e.filters[r]))throw s("INVALID_CONFIG","Cannot find function "+e.filters[r]+" in HtSlotMapper");g.push(h[e.filters[r]])}for(var n=0;n<e.selectors.length;n++){var i=[],o=e.selectors[n];if(a.isString(o)){if(!h.hasOwnProperty(o))throw s("INVALID_CONFIG","Cannot find function "+o+" in HtSlotMapper");i.push(h[o])}else for(var c=0;c<o.length;c++){if(!h.hasOwnProperty(o[c]))throw s("INVALID_CONFIG","Cannot find function "+o[c]+" in HtSlotMapper");i.push(h[o[c]])}y.push(i)}}(),{__type__:"HtSlotMapper",select:d,filter:f}}var i=e(9),o=e(47),a=e(27),s=e(28),u=e(12),c=e(18),l=e(24);t.exports=n},{}],23:[function(e,t,r){"use strict";var n=e(47),i=e(26),o=e(27),a=e(28),s=e(19),u=e(18),c=e(24);t.exports=function(){function e(){return d}function t(e){var t=u.validate({type:"object"},e);if(!t.valid)throw a("INVALID_ARGUMENT",t.format());var r="";for(var n in e)if(e.hasOwnProperty(n))if(o.isObject(e[n]))for(var i in e[n])e[n].hasOwnProperty(i)&&(r+=n+"%5B"+i+"%5D="+encodeURIComponent(e[n][i])+"&");else if(o.isArray(e[n]))for(var s=0;s<e[n].length;s++)r+=n+"%5B%5D="+encodeURIComponent(e[n][s])+"&";else r+=n+"="+encodeURIComponent(e[n])+"&";return r.slice(0,-1)}function r(e,r,n){var i=u.validate({type:"object",strict:!0,properties:{base:{type:"string",pattern:"url"},path:{type:["array","null"],items:{type:"string"},optional:!0},query:{type:["string","object"],optional:!0}}},{base:e,path:r,query:n});if(!i.valid)throw a("INVALID_ARGUMENT",i.format());return"/"!==e[e.length-1]&&r&&(e+="/"),r=r||[],o.isObject(n)&&(n=t(n)),n=n?"?"+n:"",e+r.join("/")+n}function l(e){var l=u.validate({type:"object",properties:{async:{type:"boolean",optional:!0},continueAfterTimeout:{type:"boolean",optional:!0},data:{type:["object","string","array"],optional:!0},onSuccess:{type:"function",optional:!0},onFailure:{type:"function",optional:!0},onTimeout:{type:"function",optional:!0},useImgTag:{type:"boolean",optional:!0},initiatorId:{type:"string",optional:!0},scope:{type:"any",optional:!0},sessionId:{type:"string",optional:!0},timeout:{type:"integer",gte:0,optional:!0},globalTimeout:{optional:"true",type:"boolean"},url:{type:"string",pattern:"url"}}},e);if(!l.valid)throw a("INVALID_ARGUMENT",l.format());var p,f=e.initiatorId+"-"+e.sessionId+" => ",d=null,y=e.scope||window;if(e.useImgTag)p=y.document.createElement("img");else{p=y.document.createElement("script"),p.type="text/javascript";var g=!0;e.hasOwnProperty("async")&&(g=e.async),p.async=g}var h=e.url;if(e.data){var v;v=o.isString(e.data)?e.data:t(e.data),h=r(e.url,null,v)}var m,b=!1,_=function(){try{if(b)return;b=!0,e.onTimeout&&e.onTimeout(),e.useImgTag||e.continueAfterTimeout||p.parentNode.removeChild(p)}catch(e){c.error(f+"JSONP request timed out."),c.error(e.stack)}};e.globalTimeout&&n.services.TimerService.addTimerCallback(e.sessionId,_),e.timeout&&(m=setTimeout(_,e.timeout));var w=function(){try{if(b){if(!e.continueAfterTimeout)return}else clearTimeout(m);e.onSuccess&&e.onSuccess(null,i.now(),b),b=!0,e.useImgTag||p.parentNode.removeChild(p)}catch(e){c.error('"onSuccess" callback threw an error.'),c.error(e.stack)}};null===p.onload?p.onload=w:p.onreadystatechange=function(){"loaded"!==p.readyState&&"complete"!==p.readyState||(p.onreadystatechange=null,w())};var I=function(){try{if(b){if(!e.continueAfterTimeout)return}else clearTimeout(m),b=!0;e.onFailure&&e.onFailure(),e.useImgTag||p.parentNode.removeChild(p)}catch(e){c.error('"onFailure" callback threw an error.'),c.error(e.stack)}};if(p.onerror=I,d=i.now(),p.src=h,!e.useImgTag){var S=y.document.getElementsByTagName("script")[0];S?S.parentNode.insertBefore(p,S):s.msie||s.msedge||s.mozilla?y.onload=function(){y.document.body.appendChild(p)}:y.document.body.appendChild(p)}return d}function p(s){var p=u.validate({type:"object",strict:!0,properties:{async:{type:"boolean",optional:!0},contentType:{type:["string","boolean"],optional:!0},continueAfterTimeout:{type:"boolean",optional:!0},data:{type:["object","string"],optional:!0},headers:{type:"object",optional:!0},jsonp:{type:"boolean",optional:!0},method:{type:"string",pattern:/(GET|POST)/},onFailure:{type:"function",optional:!0},onSuccess:{type:"function",optional:!0},onTimeout:{type:"function",optional:!0},initiatorId:{type:"string",optional:!0},scope:{type:"object",optional:!0},sessionId:{type:"string",optional:!0},timeout:{type:"integer",gte:0,optional:!0},globalTimeout:{optional:"true",type:"boolean"},url:{type:"string",pattern:"url"},withCredentials:{type:"boolean",optional:!0}}},s);if(!p.valid)throw a("INVALID_ARGUMENT",p.format());if(!e()){if(s.jsonp&&"GET"===s.method)return l(s);throw a("INTERNAL_ERROR","XHR is not supported in this browser.")}var f=s.initiatorId+"-"+s.sessionId+" => ",d=null,y=s.scope||window,g=new y.XMLHttpRequest,h=s.url,v=null;if(s.data)if("GET"===s.method){var m;m=o.isString(s.data)?s.data:t(s.data),h=r(s.url,null,m)}else"POST"===s.method&&(v=o.isString(s.data)?s.data:JSON.stringify(s.data));var b=!0;s.hasOwnProperty("async")&&(b=s.async),g.open(s.method,h,b);var _="application/x-www-form-urlencoded; charset=UTF-8";if(void 0!==s.contentType&&(_=s.contentType),_&&g.setRequestHeader("Content-Type",_),s.headers){s.headers.hasOwnProperty("X-Request-With")||g.setRequestHeader("X-Request-With","XMLHttpRequest");for(var w in s.headers)s.headers.hasOwnProperty(w)&&g.setRequestHeader(w,s.headers[w])}s.withCredentials&&(g.withCredentials=!0);var I,S=!1,L=function(){try{if(S)return;S=!0,s.onTimeout&&s.onTimeout()}catch(e){c.error(f+' "onTimeout" callback threw an error.'),c.error(e.stack)}};return s.globalTimeout&&n.services.TimerService.addTimerCallback(s.sessionId,L),s.timeout&&(s.continueAfterTimeout?I=setTimeout(L,s.timeout):(g.timeout=s.timeout,g.ontimeout=L)),(s.onSuccess||s.onFailure)&&(g.onreadystatechange=function(){if(4===g.readyState){if(S){if(!s.continueAfterTimeout)return}else clearTimeout(I),g.ontimeout=null;if(c.info(f+'XHR request responded with status "'+g.statusText+'".'),200===g.status){if(s.onSuccess)try{s.onSuccess(g.responseText,i.now(),S)}catch(e){c.error(f+'"onSuccess" callback threw an error.'),c.error(e.stack)}}else if(s.onFailure)try{s.onFailure(g.status)}catch(e){c.error(f+'"onFailure" callback threw an error.'),c.error(e.stack)}S=!0}}),d=i.now(),g.send(v),d}function f(e){return e.useImgTag=!0,l(e)}var d;return function(){d=window.XMLHttpRequest&&"string"==typeof(new XMLHttpRequest).responseType}(),{__type__:"Network",ajax:p,jsonp:l,img:f,buildUrl:r,objToQueryString:t,isXhrSupported:e}}()},{}],24:[function(e,t,r){"use strict";function n(){function e(){for(var e,t="unknown",r=/at\s(.+)/g,n=Error().stack,i=0;null!==(e=r.exec(n));){if(2===i){t=e[1];break}i++}return(h?h+" | ":"")+t+":"}function t(e){var t=s.validate({type:"string",exec:function(e,t){n.LoggingLevels.hasOwnProperty(t)||this.report("must be one of the predefined values in `Scribe.LoggingLevels`")}},e);if(!t.valid)throw a("INVALID_ARGUMENT",t.format());g=n.LoggingLevels[e]
}function r(e){var t=s.validate({type:"string"},e);if(!t.valid)throw a("INVALID_ARGUMENT",t.format());h=e}function u(){window.console=v}function c(){window.console=m}function l(){if(!(g<n.LoggingLevels.ERROR)){var t=Array.prototype.slice.call(arguments);t.unshift(e()),m.error.apply(m,t)}}function p(){if(!(g<n.LoggingLevels.WARN)){var t=Array.prototype.slice.call(arguments);t.unshift(e()),m.warn.apply(m,t)}}function f(){if(!(g<n.LoggingLevels.INFO)){var t=Array.prototype.slice.call(arguments);t.unshift(e()),m.info.apply(m,t)}}function d(){g<n.LoggingLevels.INFO||(m.info.apply(m,[e()]),m.table.apply(m,arguments))}function y(){if(!(g<n.LoggingLevels.DEBUG)){var t=Array.prototype.slice.call(arguments);t.unshift(e()),m.debug.apply(m,t)}}var g,h,v,m;return function(){v={assert:o.noOp,clear:o.noOp,count:o.noOp,debug:o.noOp,dir:o.noOp,dirxml:o.noOp,error:o.noOp,exception:o.noOp,group:o.noOp,groupCollapsed:o.noOp,groupEnd:o.noOp,info:o.noOp,log:o.noOp,profile:o.noOp,profileEnd:o.noOp,table:o.noOp,time:o.noOp,timeEnd:o.noOp,timeStamp:o.noOp,trace:o.noOp,warn:o.noOp},m=window.console,g=n.LoggingLevels.DEBUG,h=i.NAMESPACE+"_"+o.generateUniqueId(4)}(),{__type__:"Scribe",__dummyConsole:v,disableNativeLogging:u,enableNativeLogging:c,setLevel:t,setHeader:r,error:l,warn:p,info:f,table:d,debug:y}}var i=e(47),o=e(26),a=e(28),s=e(18);n.LoggingLevels={SILENT:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},t.exports=n()},{}],25:[function(e,t,r){"use strict";var n=e(27),i=e(18),o=e(28);t.exports=function(){function e(e){return u[e]}function t(e){return!(!n.isArray(e,"number")||2!==e.length)}function r(e){if(t(e))return!0;if(!n.isArray(e,"array"))return!1;for(var r=0;r<e.length;r++)if(!t(e[r]))return!1;return!0}function a(t,r,a){var s=i.validate({type:"object",strict:!0,properties:{arr:{type:["array","string"]},separator:{optional:!0,type:"string"},multiplier:{optional:!0,type:"string"}}},{arr:t,separator:r,multiplier:a});if(!s.valid)throw o("INVALID_ARGUMENT",s.format());r=r||",",a=a||"x";var u="";if(n.isArray(t,"array"))for(var c=0;c<t.length;c++)u+=e(t[c])?t[c]:t[c][0]+a+t[c][1]+r;else e(t)?u+=t+r:u+=t[0]+a+t[1]+r;return u.slice(0,-1)}function s(t,r,n){var a=i.validate({type:"object",strict:!0,properties:{str:{type:"string"},separator:{optional:!0,type:"string"},multiplier:{optional:!0,type:"string"}}},{str:t,separator:r,multiplier:n});if(!a.valid)throw o("INVALID_ARGUMENT",a.format());r=r||",",n=n||"x";for(var s=[],u=t.split(r),c=0;c<u.length;c++)if(e(u[c]))s.push(u[c]);else{var l=u[c].split(n);s.push([Number(l[0]),Number(l[1])])}return s}var u={native:!0,fullwidth:!0};return{__type__:"Size",arrayToString:a,stringToArray:s,isSpecialSize:e,isSize:t,isSizes:r}}()},{}],26:[function(e,t,r){"use strict";var n=e(13),i=e(28),o=e(18);t.exports=function(){function e(e,t){e.open("text/html","replace"),e.write(t),e.close()}function t(e,t){var r=o.validate({type:"object",properties:{len:{optional:!0,type:["integer",null],gte:1},charSet:{optional:!0,type:"string"}}},{len:e,charSet:t});if(!r.valid)throw i("INVALID_ARGUMENT",r.format());if(void 0!==t&&!l.hasOwnProperty(t))throw i("INVALID_VALUE","`charSet` must be one of predefined values in UidCharacterSets");e=e||n.DEFAULT_UID_LENGTH,t=t||n.DEFAULT_UID_CHARSET;for(var a="",s=0;s<e;s++)a+=l[t].charAt(Math.floor(Math.random()*l[t].length));return a}function r(){return t(8,"HEX")+"-"+t(4,"HEX")+"-4"+t(3,"HEX")+"-"+"89ab".charAt(Math.floor(4*Math.random()))+t(3,"HEX")+"-"+t(8,"HEX")}function a(){return(new Date).getTime()}function s(){return c.getTimezoneOffset()}function u(){}var c,l={ALPHANUM:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",ALPHA_UPPER:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",ALPHA_LOWER:"abcdefghijklmnopqrstuvwxyz",HEX:"0123456789abcdef",NUM:"0123456789"};return function(){c=new Date}(),{__type__:"System",UidCharacterSets:l,generateUniqueId:t,generateUuid:r,now:a,getTimezoneOffset:s,documentWrite:e,noOp:u}}()},{}],27:[function(e,t,r){"use strict";var n=e(28),i=e(18),o=e(24);t.exports=function(){function e(e){return void 0===e?"undefined":{}.toString.call(e).match(E)[1].toLowerCase()}function t(t){return"string"===e(t)}function r(t){return"number"===e(t)&&!isNaN(t)}function a(t){return"number"===e(t)||"string"===e(t)&&!isNaN(Number(t))}function s(e){return r(e)&&e%1==0}function u(t){return"function"===e(t)}function c(t){return"boolean"===e(t)}function l(t){return"object"===e(t)}function p(t){return"regexp"===e(t)}function f(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}function d(r,i,o){if("array"!==e(r))return!1;if(void 0!==i){if(!t(i))throw n("INVALID_TYPE","`type` must be a string");if("class"===i){if(!t(o))throw n("INVALID_TYPE","`className` must be a string");for(var a=0;a<r.length;a++)if("object"!=typeof r[a]||r[a].__type__!==o)return!1}else for(var s=0;s<r.length;s++)if(e(r[s])!==i)return!1}return!0}function y(e){var t=i.validate({type:"array"},e);if(!t.valid)throw n("INVALID_ARGUMENT",t.format());return e.length?e.splice(Math.floor(Math.random()*e.length),1)[0]:null}function g(e){if(void 0===e)throw n("MISSING_ARGUMENT","`entity` is required");if(!l(e)&&!d(e))throw n("INVALID_TYPE","`entity` must be an object or array");return JSON.parse(JSON.stringify(e))}function h(){var e=Array.prototype.slice.call(arguments),t=i.validate({type:"array",items:{type:"object"}},e);if(!t.valid)throw n("INVALID_ARGUMENT",t.format());for(var r={},o=0;o<e.length;o++)for(var a in e[o])e[o].hasOwnProperty(a)&&(r[a]=e[o][a]);return r}function v(){var e=Array.prototype.slice.call(arguments),t=i.validate({type:"array",items:{type:"array"}},e);if(!t.valid)throw n("INVALID_ARGUMENT",t.format());for(var r=[],o=0;o<e.length;o++)for(var a=0;a<e[o].length;a++)r.push(e[o][a]);return r}function m(e){if(t(e)){if(""!==e)return!1}else if(l(e)){for(var r in e)if(e.hasOwnProperty(r))return!1}else{if(!d(e))throw n("INVALID_TYPE","`entity` must be either a string, object, or an array");if(e.length)return!1}return!0}function b(e,t,r){var o=i.validate({type:"object",properties:{arr1:{type:"array"},arr2:{type:"array"},matcher:{optional:!0,type:"function"}}},{arr1:e,arr2:t,matcher:r});if(!o.valid)throw n("INVALID_ARGUMENT",o.format());void 0===r&&(r=N);for(var a=0;a<e.length;a++){for(var s=!1,u=0;u<t.length&&!(s=r(e[a],t[u]));u++);if(!s)return!1}return!0}function _(e,t,r,a){var s=i.validate({type:"object",strict:!0,properties:{fn:{type:"function"},args:{type:["array","null"],optional:!0},errorMessage:{type:"string",optional:!0},context:{type:"any",optional:!0}}},{fn:e,args:t,errorMessage:r,context:a});if(!s.valid)throw n("INVALID_ARGUMENT",s.format());return t=t||[],a=a||null,r=r||"Error occurred while calling function.",function(){try{e.apply(a,t)}catch(e){o.error(r),o.error(e.stack)}}}function w(e,t){var r=""+e;if(t=+t,t!=t&&(t=0),t<0)throw new RangeError("repeat count must be non-negative");if(t==1/0)throw new RangeError("repeat count must be less than infinity");if(t=Math.floor(t),0==r.length||0==t)return"";if(r.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="",i=0;i<t;i++)n+=r;return n}function I(e,t,r){return t>>=0,r=String(r||" "),e.length>t?String(e):(t-=e.length,t>r.length&&(r+=w(r,t/r.length)),r.slice(0,t)+String(e))}function S(e,t,r){return t>>=0,r=String(r||" "),e.length>t?String(e):(t-=e.length,t>r.length&&(r+=w(r,t/r.length)),String(e)+r.slice(0,t))}function L(e,t){t=t||null;try{return eval.call(t,e)}catch(t){o.error("Error evaluating variable "+e+": "+t)}return null}function T(e,t,r){r=r||null;try{return eval.call(r,e+"("+t.join()+")")}catch(t){o.error("Error evaluating function "+e+": "+t)}return null}function A(){var e=Array.prototype.slice.call(arguments),t=i.validate({type:"array",minLength:2,items:{type:"array"}},e);if(!t.valid)throw n("INVALID_ARGUMENT",t.format());for(var r=e[0],o=1;o<e.length;o++)Array.prototype.push.apply(r,e[o]);return r}var E=/\s([a-zA-Z]+)/,N=function(e,t){return e===t};return{__type__:"Utilities",randomSplice:y,deepCopy:g,mergeObjects:h,mergeArrays:v,isArray:d,isEmpty:m,isInteger:s,isString:t,isNumeric:a,isRegex:p,isNumber:r,isBoolean:c,isFunction:u,isObject:l,isArraySubset:b,getType:e,tryCatchWrapper:_,arrayDelete:f,repeatString:w,padStart:I,padEnd:S,evalVariable:L,evalFunction:T,appendToArray:A}}()},{}],28:[function(e,t,r){"use strict";function n(e,t){var r=i.validate({type:"object",strict:"true",properties:{type:{type:"string",exec:function(e,t){n.ErrorTokens.hasOwnProperty(t)||this.report("must be one of the predefined tokens in `Whoopsie.ErrorTokens`")}},message:{type:"string",minLength:1}}},{type:e,message:t});if(!r.valid)throw n("INVALID_ARGUMENT",r.format());return new Error(e+": "+t)}var i=e(18);n.ErrorTokens={MISSING_ARGUMENT:1,INVALID_TYPE:2,INVALID_VALUE:3,MISSING_PROPERTY:4,NUMBER_OUT_OF_RANGE:5,EMPTY_ENTITY:6,INTERNAL_ERROR:7,DUPLICATE_ENTITY:8,INVALID_ARGUMENT:9,INVALID_CONFIG:10},t.exports=n},{}],29:[function(e,t,r){"use strict";function n(e){function t(e){var t=Array.prototype.slice.call(arguments);t.shift();var r;if("error"===e)r=f.error;else if("warn"===e)r=f.warn;else{if("info"!==e)return;r=f.info}for(var n=0;n<t.length;n++)r(t[n])}function r(){return n}var n;return function(){for(var r=[],d=0;d<c.length;d++)r.push(c[d].name);var y=p.ModuleLoader(e,r,Object.keys(l));if(y)throw u("INVALID_CONFIG",y);a.DeviceTypeChecker=i(e.DeviceTypeChecker),f.info("DeviceTypeChecker loaded.");for(var g in e.htSlots)if(e.htSlots.hasOwnProperty(g)){var h=o(g,e.htSlots[g]);a.htSlots.push(h),a.htSlotsMap[g]=h,f.info('Created htSlot "'+g+'"')}n={Services:{},Layers:{}};for(var v=0;v<c.length;v++){var m=c[v].name,b=c[v].constructor(e.Services[m]);b&&("EventsService"===m&&(b.on("error",t.bind(null,"error")),b.on("internal_error",t.bind(null,"error")),b.on("warning",t.bind(null,"warn")),b.on("internal_warning",t.bind(null,"warn")),b.on("info",t.bind(null,"info")),b.on("internal_info",t.bind(null,"info"))),a.services[m]=b,b.getDirectInterface&&b.getDirectInterface()&&(n.Services=s.mergeObjects(n.Services,b.getDirectInterface())),f.info('Loaded service "'+m+'"'))}for(var _,w=e.Layers.length-1;w>=0;w--){var I=e.Layers[w].layerId,S=l[I](e.Layers[w].configs);S.getDirectInterface()&&(n.Layers=s.mergeObjects(n.Layers,S.getDirectInterface())),_&&S.setNext(_.execute),_=S,f.info('Loaded layer "'+I+'"')}}(),{__type__:"Loader",getDirectInterface:r}}var i=e(14),o=e(21),a=e(47),s=e(27),u=e(28),c=[{name:"EventsService",constructor:e(41)},{name:"HeaderStatsService",constructor:e(42)},{name:"TimerService",constructor:e(45)},{name:"ComplianceService",constructor:e(44)},{name:"RenderService",constructor:e(43)}],l={GptLayer:e(4),MediationLayer:e(6),PartnersLayer:e(7)},p=e(12),f=e(24);t.exports=n},{}],30:[function(e,t,r){"use strict";function n(e,t){function r(e){var r=a.validate({type:"array",items:{type:"object",properties:{targeting:{optional:!0,type:"object"},ref:{type:"any",optional:!0,exec:function(e,t){!i.isGSlot(t)&&t&&this.report("must be a google slot object")}}}}},e);if(!r.valid)throw o("INVALID_ARGUMENT",r.format());var n;n=t.pageDemandHistory;for(var u in n)n.hasOwnProperty(u)&&(window.googletag.pubads().clearTargeting(u),delete n[u]);n=t.gSlotDemandHistory;for(var c=0;c<e.length;c++)if(e[c].ref){var l=e[c].ref,p=l.getSlotElementId();if(n.hasOwnProperty(p)){for(var f in n[p])n[p].hasOwnProperty(f)&&l.clearTargeting(f);s.info("Cleared targeting for google slot "+p),delete n[p]}}}return function(){t.gSlotDemandHistory=t.gSlotDemandHistory||{},t.pageDemandHistory=t.pageDemandHistory||{}}(),{__type__:"GptClearTargeting",clearTargeting:r}}var i=e(20),o=e(28),a=e(18),s=e(24);t.exports=n},{}],31:[function(e,t,r){"use strict";function n(e,t){function r(e){return u?u(e):window.googletag.destroySlots(e)}function n(e){var n=s.validate({type:"array",optional:!0,properties:{items:{type:"object",optional:!0,exec:function(e,t){o.isGSlot(t)||this.report("must be a google slot object")}}}},e);if(!n.valid)throw a("INVALID_ARGUMENT",n.format());for(var i=e||o.getGSlots(),u=0;u<i.length;u++)t.gSlotDisplayHistory.hasOwnProperty(i[u].getSlotElementId())&&delete t.gSlotDisplayHistory[i[u].getSlotElementId()];return r(e)}var u;return function(){t.hasOwnProperty("gSlotDisplayHistory")||(t.gSlotDisplayHistory={});var r=function(){e.override&&e.override.destroySlots&&(u=i.LastLineGoogletag.destroySlots)};i.initQueue.push(r)}(),{__type__:"GptDestroySlots",destroySlots:n}}var i=e(47),o=e(20),a=e(28),s=e(18);t.exports=n},{}],32:[function(e,t,r){"use strict";function n(e,t,r){function n(e){return I?I(e):window.googletag.display(e)}function v(e){if(t.requestArchitecture===u.RequestArchitectures.SRA)for(;S.length;){if(!S[0].done)return;var r=S.shift();r.outParcels&&!p.isEmpty(r.outParcels)&&_(r.outParcels),r.parcels&&!p.isEmpty(r.parcels)&&w(r.sessionId,r.parcels),n(r.divId)}else e.outParcels&&!p.isEmpty(e.outParcels)&&_(e.outParcels),e.parcels&&!p.isEmpty(e.parcels)&&w(e.sessionId,e.parcels),n(e.divId)}function m(e){var n=g.validate({type:"string"},e);if(!n.valid)throw l("INVALID_ARGUMENT",n.format());var c={done:!1,divId:e,outParcels:null,parcels:null,sessionId:""};t.requestArchitecture===u.RequestArchitectures.SRA&&S.push(c);var p=a.getGSlotByDivId(e);if(!p)return c.done=!0,v(c),s.resolve();var f=[];f=t.requestArchitecture===u.RequestArchitectures.SRA?a.getGSlots():p?[p]:[];for(var d=f.length-1;d>=0;d--)t.gSlotDisplayHistory.hasOwnProperty(f[d].getSlotElementId())&&f.splice(d,1);if(!f.length)return c.done=!0,v(c),s.resolve();for(var y=[],m=0;m<f.length;m++)y.push({slot:f[m]}),t.gSlotDisplayHistory[f[m].getSlotElementId()]=!0;if(t.initialLoadState===u.InitialLoadStates.DISABLED)return c.done=!0,v(c),s.resolve();var _=b(y);if(c.outParcels=_,!_.length)return o.emit("warning","No valid Header Tag slots found in call to display."),c.done=!0,v(c),s.resolve();var w=i.createTimer(t.globalTimeout,!0);return i.addTimerCallback(w,function(){o.emit("global_timeout_reached",{sessionId:w})}),c.sessionId=w,o.emit("hs_session_start",{sessionId:w}),h.info("Requesting demand for "+_.length+" parcels"),r(w,_).then(function(e){var t=g.validate({type:"array",items:{type:"object",properties:{targeting:{optional:!0,type:"object"},width:{optional:!0,type:"number",gt:0},height:{optional:!0,type:"number",gt:0},price:{optional:!0,type:"number"},adm:{optional:!0,type:"string"},pass:{optional:!0,type:"boolean"},htSlot:{optional:!0,type:"object"}}}},e);if(!t.valid)throw l("INVALID_ARGUMENT",t.format());h.info("Received "+e.length+" parcels"),c.parcels=e,c.done=!0,v(c),o.emit("hs_session_end",{sessionId:w})})}var b,_,w,I,S;return function(){o=c.services.EventsService,i=c.services.TimerService,t.hasOwnProperty("gSlotDisplayHistory")||(t.gSlotDisplayHistory={}),t.hasOwnProperty("requestArchitecture")||(t.requestArchitecture=u.RequestArchitectures.MRA),t.hasOwnProperty("initialLoadState")||(t.initialLoadState=u.InitialLoadStates.ENABLED);var r=function(){e.override&&e.override.display&&(I=c.LastLineGoogletag.display)};c.initQueue.push(r),b=f(e,t).mapHtSlots,_=d(e,t).clearTargeting,w=y(e,t).setTargeting,S=[]}(),{__type__:"GptDisplay",display:m}}var i,o,a=e(20),s=e(17),u=e(13),c=e(47),l=e(28),p=e(27),f=e(33),d=e(30),y=e(36),g=e(18),h=e(24);t.exports=n},{}],33:[function(e,t,r){"use strict";function n(e,t){function r(e){var t=l.validate({type:"array",items:{type:"object",strict:!0,properties:{slot:{type:"any",exec:function(e,t){o.isGSlot(t)||this.report("must be a google slot object")}},firstPartyData:{type:"object",optional:!0}}}},e);if(!t.valid)throw c("INVALID_ARGUMENT",t.format());for(var r=[],n=0;n<e.length;n++){var a=e[n].slot,d={reference:a};e[n].firstPartyData&&(d.firstPartyData=e[n].firstPartyData),d.divId=a.getSlotElementId();var y=[],g=a.getSizes(i.getViewportWidth(),i.getViewportHeight())||a.getSizes();if(g){for(var h=0;h<g.length;h++)u.isString(g[h])||y.push([g[h].getWidth(),g[h].getHeight()]);for(var v={},m=a.getTargetingKeys(),b=0;b<m.length;b++)v[m[b]]=a.getTargeting(m[b]).map(function(e){return String(e)});d.sizes=y,d.targeting=v,d.adUnitPath=a.getAdUnitPath(),r.push(d)}}var _=s.htSlots,w=f.filter(_,r),I=f.select(w,r);return p.info(I.length+" HT slot mappings"),I}var n,f;return function(){var r=l.validate({type:"object",properties:{slotMapping:{type:"object"}}},e);if(!r.valid)throw c("INVALID_ARGUMENT",r.format());n=t,f=a(e.slotMapping)}(),{__type__:"GptMapSlots",mapHtSlots:r}}var i=e(9),o=e(20),a=e(22),s=e(47),u=e(27),c=e(28),l=e(18),p=e(24);t.exports=n},{}],34:[function(e,t,r){"use strict";function n(e,t){function r(){return l?l():window.googletag.pubads().enableSingleRequest()}function n(){return p?p():window.googletag.pubads().disableInitialLoad()}function u(){return t.requestArchitecture=a.RequestArchitectures.SRA,r()}function c(){return t.initialLoadState=a.InitialLoadStates.DISABLED,n()}var l,p;return function(){var r=s.validate({type:"object",properties:{enableSingleRequest:{type:"boolean"},disableInitialLoad:{type:"boolean"}}},e);if(!r.valid)throw o("INVALID_ARGUMENT",r.format());t.requestArchitecture=e.enableSingleRequest?a.RequestArchitectures.SRA:a.RequestArchitectures.MRA,t.initialLoadState=e.disableInitialLoad?a.InitialLoadStates.DISABLED:a.InitialLoadStates.ENABLED;var n=function(){e.override&&(e.override.enableSingleRequest&&(l=i.LastLineGoogletag.enableSingleRequest),e.override.disableInitialLoad&&(p=i.LastLineGoogletag.disableInitialLoad))};i.initQueue.push(n)}(),{__type__:"GptOptions",enableSingleRequest:u,disableInitialLoad:c}}var i=e(47),o=e(28),a=e(13),s=e(18);t.exports=n},{}],35:[function(e,t,r){"use strict";function n(e,t,r){function n(e,t){return _?_(e,t):window.googletag.pubads().refresh(e,t)}function h(e,s){var c=y.validate({type:"object",strict:!0,properties:{gSlots:{type:"array",optional:!0},options:{type:"object",optional:!0}}},{gSlots:e,options:s});if(!c.valid)throw u("INVALID_ARGUMENT",c.format());e||(e=a.getGSlots());for(var l=e.slice(),p=e.length-1;p>=0;p--)a.isGSlot(e[p])||e.splice(p,1);if(t.requestArchitecture===f.RequestArchitectures.MRA)for(var h=e.length-1;h>=0;h--)t.gSlotDisplayHistory.hasOwnProperty(e[h].getSlotElementId())||e.splice(h,1);if(!e.length)return n(l,s),d.resolve();for(var _=[],w=0;w<e.length;w++)_.push({slot:e[w]}),t.gSlotDisplayHistory[e[w].getSlotElementId()]=!0;var I=v(_);if(!I.length)return o.emit("warning","No valid Header Tag slots found in call to refresh."),n(l,s),d.resolve();var S=i.createTimer(t.globalTimeout,!0);return i.addTimerCallback(S,function(){o.emit("global_timeout_reached",{sessionId:S})}),o.emit("hs_session_start",{sessionId:S}),g.info("Requesting demand for "+I.length+" parcels"),r(S,I).then(function(e){var t=y.validate({type:"array",items:{type:"object",properties:{targeting:{optional:!0,type:"object"},width:{optional:!0,type:"number",gt:0},height:{optional:!0,type:"number",gt:0},price:{optional:!0,type:"number"},adm:{optional:!0,type:"string"},pass:{optional:!0,type:"boolean"},htSlot:{optional:!0,type:"object"}}}},e);if(!t.valid)throw u("INVALID_ARGUMENT",t.format());g.info("Received "+e.length+" parcels"),m(I),b(S,e),o.emit("hs_session_end",{sessionId:S}),n(l,s)})}var v,m,b,_;return function(){o=s.services.EventsService,i=s.services.TimerService,t.hasOwnProperty("gSlotDisplayHistory")||(t.gSlotDisplayHistory={}),t.hasOwnProperty("requestArchitecture")||(t.requestArchitecture=f.RequestArchitectures.MRA),t.hasOwnProperty("initialLoadState")||(t.initialLoadState=f.InitialLoadStates.ENABLED);var r=function(){e.override&&e.override.refresh&&(_=s.LastLineGoogletag.refresh)};s.initQueue.push(r),v=c(e,t).mapHtSlots,m=l(e,t).clearTargeting,b=p(e,t).setTargeting}(),{__type__:"GptRefresh",refresh:h}}var i,o,a=e(20),s=e(47),u=e(28),c=e(33),l=e(30),p=e(36),f=e(13),d=e(17),y=e(18),g=e(24);t.exports=n},{}],36:[function(e,t,r){"use strict";function n(e,t){function r(e,r){var n=c.validate({type:"object",strict:!0,properties:{sessionId:{type:"string",minLength:1},targetingParcels:{type:"array",items:{type:"object",properties:{targeting:{optional:!0,type:"object"},ref:{type:"any",optional:!0,exec:function(e,t){!o.isGSlot(t)&&t&&this.report("must be a google slot object")}}}}}}},{sessionId:e,targetingParcels:r});if(!n.valid)throw u("INVALID_ARGUMENT",n.format());for(var a=0;a<r.length;a++)if(!r[a].pass&&r[a].targeting&&!s.isEmpty(r[a].targeting)){"slot"===r[a].targetingType&&i.emit("hs_slot_kv_pushed",{sessionId:e,statsId:r[a].partnerStatsId,htSlotId:r[a].htSlot.getId(),requestId:r[a].requestId,xSlotNames:[r[a].xSlotName]});var p,f=[],d=r[a].targeting;for(var y in d)if(d.hasOwnProperty(y))if("page"===r[a].targetingType)p=t.pageDemandHistory,p[y]=p[y]||{},p[y]=!0,window.googletag.pubads().setTargeting(y,d[y]),l.info("Set page level targeting: "+f);else{var g=r[a].ref,h=g.getSlotElementId();p=t.gSlotDemandHistory,p[h]=p[h]||{},p[h][y]=!0,f.push(y),g.setTargeting(y,g.getTargeting(y).concat(d[y])),l.info("Set targeting for google slot "+h+": "+f)}}}return function(){i=a.services.EventsService,t.gSlotDemandHistory=t.gSlotDemandHistory||{},t.pageDemandHistory=t.pageDemandHistory||{}}(),{__type__:"GptSetTargeting",setTargeting:r}}var i,o=e(20),a=e(47),s=e(27),u=e(28),c=e(18),l=e(24);t.exports=n},{}],37:[function(e,t,r){"use strict";var n=e(18),i=function(e){var t=n.validate({type:"object",properties:{clientID:{type:"integer",gte:0},optimeraHost:{type:"string",minLength:1},optimeraPath:{type:"string",minLength:1},xSlots:{type:"object",properties:{"*":{type:"object",properties:{}}}}}},e);return t.valid?null:t.format()};t.exports=i},{}],38:[function(e,t,r){"use strict";function n(e){function t(){return{clientID:e.clientID,optimeraHost:e.optimeraHost,optimeraPath:e.optimeraPath}}function r(e){var r=t(),n={},o=d.generateUniqueId(),a=s.getProtocol()+r.optimeraHost+"/json/client/"+r.clientID+"/"+r.optimeraPath+".js";i.gdpr.getConsent(),i.isPrivacyEnabled();return{url:a,data:n,callbackId:o}}function n(e){_._adResponseStore[0]=e}function m(e){e&&y.img({url:decodeURIComponent(e),method:"GET"})}function b(e,t,r){if(void 0!==t)for(var n=[t][0],i=Object.getOwnPropertyNames(n),o=0;o<r.length;o++){var s=r[o],u={},c=s.htSlot.getId();u[c]={},u[c][s.requestId]=[s.xSlotName];var l,f=s.xSlotRef.divID;if(i.includes(f)&&(l=n[f]),l){var y=[1,1],g=l;w.enabledAnalytics.requestTime&&_._emitStatsEvent(e,"hs_slot_bid",u),s.size=y,s.targetingType="slot",s.targeting={};var h="";h=_._bidTransformers.targeting.apply(1);var v=p.arrayToString(s.size);g?(s.targeting[_._configs.targetingKeys.pmid]=g,s.targeting[_._configs.targetingKeys.pm]=[v+"_"+h]):s.targeting[_._configs.targetingKeys.om]=[v+"_"+h],s.targeting[_._configs.targetingKeys.id]=[s.requestId],s.price=Number(_._bidTransformers.price.apply(1));a.registerAd({sessionId:e,partnerId:w.partnerId,adm:"<span></span>",requestId:s.requestId,size:s.size,price:h,dealId:g||void 0,timeOfExpiry:w.features.demandExpiry.enabled?w.features.demandExpiry.value+d.now():0,auxFn:m,auxArgs:[""]})}else w.enabledAnalytics.requestTime&&_._emitStatsEvent(e,"hs_slot_pass",u),s.pass=!0}}var _,w;!function(){i=f.services.ComplianceService,o=f.services.EventsService,a=f.services.RenderService,w={partnerId:"OptimeraHtb",namespace:"OptimeraHtb",statsId:"OPTI",version:"2.0.0",targetingType:"slot",enabledAnalytics:{requestTime:!0},features:{demandExpiry:{enabled:!1,value:0},rateLimiting:{enabled:!1,value:0}},targetingKeys:{id:"ix_opti_id",om:"ix_opti_cpm",pm:"ix_opti_cpm",pmid:"ix_opti_dealid"},bidUnitInCents:.1,lineItemType:c.LineItemTypes.ID_AND_SIZE,callbackType:l.CallbackTypes.NONE,architecture:l.Architectures.FSRA,requestType:l.RequestTypes.AJAX};var t=g.partnerBaseConfig(e)||h(e);if(t)throw v("INVALID_CONFIG",t);_=l(w,e,null,{parseResponse:b,generateRequestObj:r,adResponseCallback:n})}();var I={__type__:"OptimeraHtb"};return u.derive(_,I)}var i,o,a,s=e(9),u=e(10),c=e(13),l=e(39),p=e(25),f=e(47),d=e(26),y=e(23),g=(e(27),e(12)),h=e(37),v=(e(24),e(28));t.exports=n},{}],39:[function(e,t,r){"use strict";function n(e,t,r,v){function m(e){return function(t){z[e]=t,delete B[e]}}function b(e,t,r){for(var n in r)if(r.hasOwnProperty(n))for(var o in r[n])r[n].hasOwnProperty(o)&&r[n][o].length&&i.emit(t,{sessionId:e,statsId:j.statsId,htSlotId:n,requestId:o,xSlotNames:r[n][o]})}function _(e,r){var n={};return"price"===e&&(n={outputCentsDivisor:1,outputPrecision:0,roundingType:"NONE"}),d.mergeObjects(q[e],{bidUnitInCents:j.bidUnitInCents},r||{},t.bidTransformer||{},n)}function w(e){var t=[];j.architecture===n.Architectures.FSRA&&t.push([]);for(var r={},i=0;i<e.length;i++){var o=e[i].htSlot.getName();if(G.mapping.hasOwnProperty(o))for(var a="_"+f.generateUniqueId(),s=0;s<G.mapping[o].length;s++){var u={},c=G.mapping[o][s];u.partnerId=j.partnerId,u.partnerStatsId=j.statsId,u.htSlot=e[i].htSlot,u.ref=e[i].ref,u.xSlotRef=G.xSlots[c],u.xSlotName=c,u.requestId=a,e[i].firstPartyData&&(u.firstPartyData=e[i].firstPartyData),j.architecture===n.Architectures.MRA?t.push([u]):j.architecture===n.Architectures.FSRA?t[0].push(u):(r.hasOwnProperty(c)||(r[c]=0),t.length<r[c]+1&&t.push([]),t[r[c]].push(u),r[c]++)}}return t}function I(e,t){if(0===t.length)return l.resolve([]);var r=M(t,e);j.callbackType===n.CallbackTypes.CALLBACK_NAME&&(B[r.callbackId]=m(r.callbackId));var o={};if(j.enabledAnalytics.requestTime){for(var a=0;a<t.length;a++){var s=t[a],u=s.htSlot.getId(),p=s.requestId;o.hasOwnProperty(u)||(o[u]={}),o[u].hasOwnProperty(p)||(o[u][p]=[]),o[u][p].push(s.xSlotName)}b(e,"hs_slot_request",o)}return new l(function(a){i.emit("partner_request_sent",{partner:j.partnerId,parcels:t,request:r});var s,u,l={url:r.url,data:r.data,method:"GET",timeout:G.timeout,withCredentials:!0,jsonp:!0,sessionId:e,globalTimeout:!0,continueAfterTimeout:!0,initiatorId:j.partnerId,onSuccess:function(u,c,l){var p,f="success";try{j.callbackType===n.CallbackTypes.NONE?p=JSON.parse(u):(u&&eval.call(null,u),p=z[r.callbackId],delete z[r.callbackId]),l&&!j.parseAfterTimeout||C(e,p,t,o,s,c,l)}catch(t){i.emit("internal_error",j.partnerId+" error parsing demand: "+t,t.stack),f="error",j.enabledAnalytics.requestTime&&!l&&b(e,"hs_slot_error",o)}i.emit("partner_request_complete",{partner:j.partnerId,status:f,parcels:t,request:r}),a(t)},onTimeout:function(){i.emit("partner_request_complete",{partner:j.partnerId,status:"timeout",parcels:t,request:r}),j.enabledAnalytics.requestTime&&b(e,"hs_slot_timeout",o),a(t)},onFailure:function(){i.emit("partner_request_complete",{partner:j.partnerId,status:"error",parcels:t,request:r}),j.enabledAnalytics.requestTime&&b(e,"hs_slot_error",o),a(t)}};u=r.networkParamOverrides?d.mergeObjects(l,r.networkParamOverrides):l,j.callbackType!==n.CallbackTypes.NONE&&j.requestType!==n.RequestTypes.AJAX||(u.jsonp=!1),s=j.requestType===n.RequestTypes.JSONP?c.jsonp(u):c.ajax(u)})}function S(e){U.push(e)}function L(){return x}function T(e){R={},R[j.namespace]=e}function A(e,t){R[j.namespace][e]=t}function E(){return j.partnerId}function N(){return R}function O(){return j.features.prefetchDisabled&&j.features.prefetchDisabled.enabled}function D(e,t){var r=h.validate({type:"object",properties:{sessionId:{type:"string",minLength:1},inParcels:{type:"array",items:{type:"object"}}}},{sessionId:e,inParcels:t});if(!r.valid)throw y("INVALID_ARGUMENT",r.format());if(t=t.slice(),G.rateLimiting.enabled){var n=f.now();if("page"===j.targetingType){if(n<=P)return[];P=n+G.rateLimiting.value}else for(var i=t.length-1;i>=0;i--){var o=t[i].htSlot.getName();F.hasOwnProperty(o)&&n<=F[o]?t.splice(i,1):F[o]=n+G.rateLimiting.value}}if(!t.length)return[];if(k)return k(e,t);for(var a=w(t),s=[],u=0;u<a.length;u++)s.push(I(e,a[u]));return s}var j,x,P,F,R,k,M,C,q,G,U,z,V,H,B;return function(){i=p.services.EventsService,o=p.services.RenderService;var f=g.PartnerProfile(e,r,v);if(f)throw y("INVALID_CONFIG",f);var h=!1;for(var m in n.CallbackTypes)if(n.CallbackTypes.hasOwnProperty(m)&&n.CallbackTypes[m]===e.callbackType){h=!0;break}if(!h)throw y("INVALID_CONFIG","`profile.callbackType` must be one of the predefined values in `Partner.CallbackTypes`");var b=!1;for(var w in n.Architectures)if(n.Architectures.hasOwnProperty(w)&&n.Architectures[w]===e.architecture){b=!0;break}if(!b)throw y("INVALID_CONFIG","`profile.architecture` must be one of the predefined values in `Partner.Architectures`");if(q={targeting:{bidUnitInCents:1,outputCentsDivisor:1,outputPrecision:0,roundingType:"FLOOR",floor:0,buckets:[{max:2e3,step:5},{max:5e3,step:100}]},price:{bidUnitInCents:1}},j=e,P=0,F={},U=[],B={},z={},G={timeout:0,lineItemType:e.lineItemType,targetingKeys:e.targetingKeys,rateLimiting:e.features.rateLimiting},t.hasOwnProperty("timeout")&&t.timeout>0&&(G.timeout=t.timeout,i.emit("hs_define_partner_timeout",{timeout:G.timeout,statsId:j.statsId})),t.hasOwnProperty("targetingKeyOverride"))for(var I in t.targetingKeyOverride)t.targetingKeyOverride.hasOwnProperty(I)&&G.targetingKeys.hasOwnProperty(I)&&(G.targetingKeys[I]=t.targetingKeyOverride[I]);if(t.hasOwnProperty("rateLimiting")&&(t.rateLimiting.hasOwnProperty("enabled")&&(G.rateLimiting.enabled=t.rateLimiting.enabled),t.rateLimiting.value&&(G.rateLimiting.value=t.rateLimiting.value)),t.hasOwnProperty("lineItemType")&&(G.lineItemType=u.LineItemTypes[t.lineItemType]),G.xSlots=t.xSlots,G.mapping=t.mapping,x=!1,r){d.isArray(r)||(r=[r]);var S=[];r.map(function(e){var t=l.defer();S.push(t.promise),c.jsonp({url:e,onSuccess:function(){t.resolve()}})}),l.all(S).then(function(){x=!0,i.emit("partner_instantiated",{partner:j.partnerId}),U=s(U)})}else i.emit("partner_instantiated",{partner:j.partnerId}),x=!0;o.registerPartner(j.partnerId,G.lineItemType,G.targetingKeys.id),V={},e.hasOwnProperty("bidUnitInCents")&&(V.targeting=a(_("targeting")),V.price=a(_("price"))),v.retriever?k=v.retriever:(C=v.parseResponse,M=v.generateRequestObj,H=v.adResponseCallback),R={},R.hasOwnProperty(j.namespace)||(R[j.namespace]={}),j.callbackType===n.CallbackTypes.ID?R[j.namespace].adResponseCallback=H:R[j.namespace].adResponseCallbacks=B}(),{__type__:"Partner",_configs:G,_adResponseStore:z,_bidTransformers:V,_setDirectInterface:T,_addToDirectInterface:A,_generateReturnParcels:w,_emitStatsEvent:b,_pushToCommandQueue:S,_generateBidTransformerConfig:_,getPartnerId:E,getDirectInterface:N,getPrefetchDisabled:O,isReady:L,retrieve:D}}var i,o,a=e(8),s=e(11),u=e(13),c=e(23),l=e(17),p=e(47),f=e(26),d=e(27),y=e(28),g=e(12),h=e(18);n.Architectures={MRA:0,SRA:1,FSRA:2},n.CallbackTypes={ID:0,CALLBACK_NAME:1,NONE:2},n.RequestTypes={ANY:0,AJAX:1,JSONP:2},t.exports=n},{}],40:[function(e,t,r){"use strict";function n(e,t){function r(e){L||(L=s({selectors:["divId"],filters:["deviceType"]}));for(var t=[],r=0;r<e.length;r++)l.htSlotsMap.hasOwnProperty(e[r])&&t.push(l.htSlotsMap[e[r]]);return L.filter(t,[{}]).map(function(e){return e.getName()})}function n(){if(!E||!A)return null;var e=f.evalVariable(T);if(void 0===e||null===e)return null;if(!f.isArray(e,"object")||f.isEmpty(e))return i.emit("error","`"+T+"` must be a non-empty array"),[];for(var t=[],r=", ignoring this p-slot",n=0;n<e.length;n++){var o=e[n];if(f.isEmpty(o))i.emit("error","`"+T+"["+n+"]` must be a non-empty object"+r);else if(o.hasOwnProperty("adUnitPath")&&f.isString(o.adUnitPath)&&!f.isEmpty(o.adUnitPath))if(!o.hasOwnProperty("divId")||f.isString(o.divId)&&!f.isEmpty(o.divId))if(!o.hasOwnProperty("sizes")||c.isSizes(o.sizes)){if(o.hasOwnProperty("targeting")){if(!f.isArray(o.targeting,"object")){i.emit("error","`"+T+"["+n+"].targeting` must be an array of objects"+r);continue}for(var u=!1,p=0;p<o.targeting.length;p++){var d=o.targeting[p];for(var y in d)d.hasOwnProperty(y)&&(f.isArray(d[y],"string")||(u=!0,i.emit("error","`"+T+"["+n+"].targeting["+p+"]."+y+"` must be an array of strings")))}if(u)continue}!o.hasOwnProperty("deviceType")||a.isValidDeviceType(o.deviceType)?t.push(o):i.emit("error","`"+T+"["+n+"].deviceType` must be a valid device type string"+r)
}else i.emit("error","`"+T+"["+n+"].sizes` must be a sizes array"+r);else i.emit("error","`"+T+"["+n+"].divId` must be a non-empty string"+r);else i.emit("error","`"+T+"["+n+"].adUnitPath` is required and must be a non-empty string"+r)}if(!t.length)return[];L||(L=s(E));var g=L.filter(l.htSlots,t);if("ALL"===A)return L.select(g,t).map(function(e){return e.htSlot.getName()});for(var h=[],v=0;v<t.length;v++)h=f.appendToArray(h,L.select(g,[t[v]]).map(function(e){return e.htSlot.getName()}));return h}function y(){if(!O)return null;var e=f.evalVariable(N);return void 0===e||null===e?null:!f.isString(e)||f.isEmpty(e)?(i.emit("error","`"+N+"` must be a non-empty string"),[]):O.hasOwnProperty(e)?r(O[e]):(i.emit("error",'Unrecognized page type "'+e+'"'),[])}function g(){return D?r(D):null}function h(){for(var e=[n,y,g],t=0;t<e.length;t++){var r=e[t]();if(r)return r}return[]}function v(e,t,r,n){t.drd.promise.then(function(t){for(var o=0;o<t.length;o++)i.emit("hs_slot_prefetch",{sessionId:e,statsId:t[o].partnerStatsId,htSlotId:t[o].htSlot.getId(),requestId:t[o].requestId,xSlotNames:[t[o].xSlotName]}),t[o].ref=r.ref;n.resolve(t)})}function m(e,t,r,n){for(var i=[],a=0;a<n.length;){var s=n[a].htSlot.getName();if(!n[a].prefetch&&I.hasOwnProperty(s)&&I[s].hasOwnProperty(t))for(var c=I[s][t];c.length;){var l=c.shift();if(!(l.timeOfExpiry<p.now())){o.startTimer(l.sessionId);var f=u.defer();v(e,l,n[a],f),i.push(f),n.splice(a,1),a--;break}}a++}return i}function b(e,t,r,n,i){var o={};n.map(function(t){o[t.ref]={sessionId:e,timeOfExpiry:1/0,drd:u.defer()}}),n.map(function(e){if(!r.getPrefetchDisabled()){var n=o[e.ref],a=n.drd;u.all(i).then(function(t){n.timeOfExpiry=p.now()+j;for(var r=[],i=0;i<t.length;i++)for(var o=t[i],s=0;s<o.length;s++){var u=o[s];u.ref===e.ref&&r.push(u)}a.resolve(r)}).catch(function(e){d.error("Error occurred during htSlot filtering"),d.error(e.stack),a.resolve([])});var s=e.htSlot.getName();I.hasOwnProperty(s)||(I[s]={}),I[s].hasOwnProperty(t)||(I[s][t]=[]),I[s][t].push(n)}})}function _(e,r){if(e.length){for(var n=[],a=0;a<e.length;a++){var s=e[a];if(l.htSlotsMap.hasOwnProperty(s)){var c={htSlot:l.htSlotsMap[s],prefetch:!0,ref:p.generateUuid()};n.push(c),d.info('Prefetching ht-slot "'+s+'"')}else i.emit("error","Unrecognized htSlotName "+s)}if(n.length){var f=o.createTimer(l.globalTimeout,!1);i.emit("hs_session_start",{sessionId:f});var y=t.__invokeAllPartners(f,n,!0);o.addTimerCallback(f,function(){for(var e=0;e<y.defers.length;e++)y.defers[e].resolve([])}),u.all(y.promises).then(function(){i.emit("hs_session_end",{sessionId:f})})}}}function w(e){if(S){var t=h();t.length&&_(t,e)}}var I,S,L,T,A,E,N,O,D,j=55e3;return function(){if(i=l.services.EventsService,o=l.services.TimerService,I={},S=!1,T="window.headertag.publisher.prefetchSlots",N="window.headertag.pagetype",e.prefetchOnLoad&&(e.prefetchOnLoad.enabled&&(S=!0),e.prefetchOnLoad.configs)){var t=e.prefetchOnLoad.configs.dynamic;t&&(t.var&&(T=t.var),t.slotMapping&&(t.slotMapping.style&&(A=t.slotMapping.style),t.slotMapping.selectors&&t.slotMapping.filters&&(E={selectors:t.slotMapping.selectors,filters:t.slotMapping.filters})));var r=e.prefetchOnLoad.configs.pageType;r&&(r.var&&(N=r.var),r.mapping&&(O=r.mapping));var n=e.prefetchOnLoad.configs.fixed;n&&n.htSlotNames&&(D=n.htSlotNames)}}(),{__type__:"Prefetch",prefetch:_,prefetchOnLoad:w,fulfilDemand:m,storeDemand:b}}var i,o,a=e(14),s=e(22),u=e(17),c=e(25),l=e(47),p=e(26),f=e(27),d=e(24);t.exports=n},{}],41:[function(e,t,r){"use strict";function n(){function e(e,t,r){var n=a.validate({type:"object",strict:!0,properties:{event:{type:"string",minLength:1},fn:{type:"function"},once:{type:"boolean"}}},{event:e,fn:r,once:t});if(!n.valid)throw o("INVALID_ARGUMENT",n.format());c.hasOwnProperty(e)||(c[e]=[]);var s=i.generateUniqueId();return c[e].push({id:s,fn:r,once:t}),s}function t(t,r){return e(t,!1,r)}function r(t,r){return e(t,!0,r)}function n(e){var t=a.validate({type:"object",strict:!0,properties:{id:{type:"string",minLength:1}}},{id:e});if(!t.valid)throw o("INVALID_ARGUMENT",t.format());for(var r in c)if(c.hasOwnProperty(r))for(var n=c[r].length-1;n>=0;n--)if(c[r][n].id===e)return void c[r].splice(n,1)}function u(){var e=Array.prototype.slice.call(arguments),t=e.shift(),r=a.validate({type:"object",strict:!0,properties:{event:{type:"string",minLength:1},args:{type:"array"}}},{event:t,args:e});if(!r.valid)throw o("INVALID_ARGUMENT",r.format());if(t&&c.hasOwnProperty(t))for(var n=c[t].length-1;n>=0;n--){try{c[t][n].fn.apply(null,e)}catch(e){s.error("Error occurred while running event listener."),s.error(e.stack)}c[t][n].once&&c[t].splice(n,1)}}var c;return function(){c={}}(),{__type__:"EventsService",on:t,once:r,off:n,emit:u}}var i=e(26),o=e(28),a=e(18),s=e(24);t.exports=n},{}],42:[function(e,t,r){"use strict";function n(e){function t(e,t){var r=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],o={s:i.s,t:i.t,e:[]};for(var a in i.events)if(i.events.hasOwnProperty(a)){var s={},u={};for(var c in i.events[a])if(i.events[a].hasOwnProperty(c))for(var l in i.events[a][c])if(i.events[a][c].hasOwnProperty(l)){s[l]={n:"auction_cycle",b:a,x:l,v:w[e]},T[a]&&!u.hasOwnProperty(l)&&(u[l]={n:"partner_timeout",b:a,x:l,v:T[a]});var p=i.events[a][c][l];"res_latency"===p.n&&(p.v=String(p.v)),o.e.push(p)}if(h.auctionCycle)for(var d in s)s.hasOwnProperty(d)&&o.e.push(s[d]);for(var y in u)u.hasOwnProperty(y)&&o.e.push(u[y])}r.push(o)}return r.map(function(e){var t={};e.e.map(function(e){t[e.b]=t[e.b]||{},t[e.b][e.n]=t[e.b][e.n]||0,t[e.b][e.n]+=e.v});for(var r in t)if(t.hasOwnProperty(r)){var n=t[r].bid_requests||0,i=t[r].bid_responses||0,o=t[r].bid_passes||0,a=t[r].bid_timeouts||0,s=t[r].bid_errors||0,u=i+o+a+s;n!==u&&(f.error('Request discepancy for "'+r+'", '+n+" out vs. "+u+" in:"),f.error(JSON.stringify(t[r],null,4)))}}),r}function r(e){if(!L.hasOwnProperty(e))return void f.error("Cannot send stats for sessionId "+e+" because it does not exist.");if(L[e]===E.IPR)return void f.error("Cannot send stats for sessionId "+e+" because it is still in progress.");if(L[e]===E.SENT)return void f.error("Cannot send stats for sessionId "+e+" because it has already been sent.");I[e].push({n:"global_timeout",v:String(s.globalTimeout)});var r={p:"display",d:s.DeviceTypeChecker.getDeviceType(),c:g,s:e,w:v,t:u.now(),pg:{t:m,e:I[e]}};r.sl=t(e,S[e]),delete I[e],delete S[e];var n=a.buildUrl(d,null,{s:y,u:o.getPageUrl(),v:2});f.info('Sending HeaderStats request for session "'+e+'"'),a.ajax({method:"POST",url:n,data:r}),L[e]=E.SENT}function n(e,t){var r=l.validate({type:"object",strict:!0,properties:{eventName:{type:"string",minLength:1},data:{type:"object",strict:!0,properties:{sessionId:{type:"string",minLength:1},statsId:{type:"string",minLength:1},htSlotId:{type:"string",minLength:1},xSlotNames:{type:"array",items:{type:"string",minLength:1}},requestId:{optional:!0,type:"string"}}}}},{eventName:e,data:t});if(!r.valid)throw c("INVALID_ARGUMENT",r.format());var n=t.sessionId,o=t.htSlotId,a=t.statsId,s=t.xSlotNames,p=t.requestId||"";if(!L.hasOwnProperty(n))return void f.error("Cannot record event "+e+" for sessionId "+n+" because it does not exist.");if(L[n]===E.DONE)return void f.error("Cannot record event "+e+" for sessionId "+n+" because it has already been completed.");if(L[n]===E.SENT)return void f.error("Cannot record event "+e+" for sessionId "+n+" because it has already been sent.");S[n].hasOwnProperty(o)||(S[n][o]={s:o,t:u.now(),events:{}}),S[n][o].events.hasOwnProperty(a)||(S[n][o].events[a]={}),S[n][o].events[a].hasOwnProperty(e)||(S[n][o].events[a][e]={});for(var d=S[n][o].events[a][e],y=0;y<s.length;y++){var g=s[y],h=n+a+o+g+p;if(!A[h]){"bid_timeouts"===e&&(A[h]=!0),d.hasOwnProperty(g)||(d[g]={n:e,v:0,b:a,x:g});var v=d[g];if("res_latency"===e){var m=u.now()-b[h];delete b[h],(!v.v||v.v>m)&&(v.v=m)}else"prefetch"===e?v.v=1:v.v++;"bid_requests"===e?b[h]=u.now():"bid_responses"===e&&i.emit("hs_slot_valid_bid_latency",t)}}}if(!a.isXhrSupported())return f.warn("Headerstats requires AJAX support. Aborting instantiation."),null;var d,y,g,h,v,m,b,_,w,I,S,L,T,A,E={IPR:0,DONE:1,SENT:2},N={hs_session_start:function(e){var t=l.validate({type:"object",strict:!0,properties:{sessionId:{type:"string",minLength:1}}},e);if(!t.valid)throw c("INVALID_ARGUMENT",t.format());var r=e.sessionId;L.hasOwnProperty(r)?L[r]===E.IPR?f.error("Session "+r+" already started."):f.warn("Session "+r+" already finished."):(L[r]=E.IPR,_[r]=u.now(),I[r]=[],S[r]={})},hs_session_end:function(e){var t=l.validate({type:"object",strict:!0,properties:{sessionId:{type:"string",minLength:1}}},e);if(!t.valid)throw c("INVALID_ARGUMENT",t.format());var n=e.sessionId;return L.hasOwnProperty(n)?L[n]===E.DONE?void f.error("Session "+n+" has already been ended."):(w[n]=String(u.now()-_[n]),delete _[n],void setTimeout(function(){L[n]=E.DONE,r(n)},0)):void f.error("Session "+n+" cannot be ended because it does not exist.")},hs_slot_request:function(e){n("bid_requests",e)},hs_slot_bid:function(e){n("bid_responses",e)},hs_slot_pass:function(e){n("bid_passes",e)},hs_slot_timeout:function(e){n("bid_timeouts",e)},hs_slot_error:function(e){n("bid_errors",e)},hs_slot_highest_bid:function(e){n("top_bid",e)},hs_slot_valid_bid_latency:function(e){n("res_latency",e)},hs_slot_kv_pushed:function(e){n("dfp_kv_pushed",e)},hs_slot_prefetch:function(e){n("prefetch",e)},hs_define_partner_timeout:function(e){var t=l.validate({type:"object",strict:!0,properties:{statsId:{type:"string",minLength:1},timeout:{type:"integer"}}},e);if(!t.valid)throw c("INVALID_ARGUMENT",t.format());T[e.statsId]=String(e.timeout)}};return function(){i=s.services.EventsService;var t=p.HeaderStatsService(e);if(t)throw c("INVALID_CONFIG",t);m=u.now(),d=o.getProtocol("http://as","https://as-sec")+".casalemedia.com/headerstats",y=e.siteId,g=e.configId,h=e.options,v=y+u.now(),v+=u.generateUniqueId(32-v.length),s.instanceId=v,L={},I={},S={},b={},_={},w={},T={},A={};for(var r in N)N.hasOwnProperty(r)&&s.services.EventsService.on(r,N[r])}(),{__type__:"HeaderStatsService"}}var i,o=e(9),a=e(23),s=e(47),u=e(26),c=(e(27),e(28)),l=e(18),p=e(12),f=e(24);t.exports=n},{}],43:[function(e,t,r){"use strict";function n(e){function t(e,t,r,n){if(e.hasOwnProperty(t)&&e[t].hasOwnProperty(r)){for(var i=null,o=0;o<n.length;o++){var a=n[o];e[t][r].hasOwnProperty(a)&&(i=e[t][r][a])}return i}}function r(e){return!!w.hasOwnProperty(e)&&(I[e]=!0,delete w[e],!0)}function n(){var e=u.now();for(var t in w)w.hasOwnProperty(t)&&w[t].timeOfExpiry&&e>w[t].timeOfExpiry&&r(t)}function d(e){var t=p.validate(T,e);if(!t.valid)throw l("INVALID_ARGUMENT",t.format());var r;do{r=u.generateUniqueId(o.PUBKIT_AD_ID_LENGTH,"ALPHANUM")}while(w.hasOwnProperty[r]);return w[r]=e,r}function y(e){var t=p.validate({type:"object",strict:!0,properties:{pubKitAdId:{type:"string"}}},{pubKitAdId:e});if(!t.valid)throw l("INVALID_ARGUMENT",t.format());if(w.hasOwnProperty(e)&&w[e].timeOfExpiry&&u.now()>w[e].timeOfExpiry&&r(e),I[e])return i.emit("internal_info","Attempted to render expired ad "+e),null;if(!w.hasOwnProperty(e))throw l("INVALID_VALUE","`pubKitAdId` does not match any registered ad");var n=w[e];return r(e),n}function g(e){var t=p.validate(T,e);if(!t.valid)throw l("INVALID_ARGUMENT",t.format());if(e.auxFn)try{e.auxFn.apply(null,e.auxArgs)}catch(e){i.emit("internal_error","Error occurred running ad aux function.",e.stack)}}function h(e,t){var r=p.validate({type:"object",strict:!0,properties:{doc:{},pubKitAdId:{type:"string"}}},{doc:e,pubKitAdId:t});if(!r.valid)throw l("INVALID_ARGUMENT",r.format());var n=y(t);if(!n)return!1;f.info("Rendering ad "+t+" for "+n.partnerId+" at "+u.now()),g(n);try{u.documentWrite(e,n.adm)}catch(e){return i.emit("internal_error",'Error occurred while rendering ad "'+t+'".',e.stack),!1}return!0}function v(e){var t=p.validate(T,e);if(!t.valid)throw l("INVALID_ARGUMENT",t.format());if(t=p.validate({type:"object",properties:{requestId:{optional:!1},size:{optional:!1}}},e),!t.valid)throw l("INVALID_ARGUMENT",t.format());var r=d(e);if(!e.price&&!e.dealId)return void f.error("Either `price` or `dealId` must be provided when registering an ad");var n=e.partnerId,i=e.requestId;if(!A.hasOwnProperty(n))return void f.error("Tried to register ad for unrecognized partner "+n);var o;o=c.isString(e.size)?e.size:a.arrayToString(e.size),a.isSpecialSize(o)&&(D[i]=o),E[n]||(E[n]={}),E[n][o]||(E[n][o]={}),E[n][o][i]||(E[n][o][i]=[]),E[n][o][i].push(r);var s=e.price;s&&(N[n]||(N[n]={}),N[n][s]||(N[n][s]={}),N[n][s][i]||(N[n][s][i]=[]),N[n][s][i].push(r));var u=e.dealId;return u&&(O[n]||(O[n]={}),O[n][u]||(O[n][u]={}),O[n][u][i]||(O[n][u][i]=[]),O[n][u][i].push(r)),r}function m(e,t,r,n,o){try{var a=p.validate({type:"object",strict:!0,properties:{partnerId:{type:"string",minLength:1,exec:function(e,t){A.hasOwnProperty(t)||this.report("partner "+t+" must be be a registered partner")}},doc:{type:"any"}}},{partnerId:e,doc:t});if(!a.valid)throw l("INVALID_ARGUMENT",a.format());if(!E.hasOwnProperty(e))return void i.emit("internal_error","Partner "+e+" missing from ad ID map.");if(!c.isObject(r))return void i.emit("internal_error","invalid targeting map");if(!r.hasOwnProperty(A[e].idKey))return void i.emit("internal_error","targeting map missing key "+A[e].idKey);var s=r[A[e].idKey];if(!c.isArray(s))return void i.emit("internal_error","invalid targeting map");if(!c.isNumeric(n))return void i.emit("internal_error","invalid width");if(!c.isNumeric(o))return void i.emit("internal_error","invalid height");var u=n+"x"+o;if(L&&L.hasOwnProperty(u)){var f=L[u];u=f[0]+"x"+f[1]}for(var d=0;d<s.length;d++){var y=s[d],g=D[y]||u;if(!E[e].hasOwnProperty(g))return void i.emit("internal_error","Size key "+g+" missing from ad ID map for partner "+e);if(E[e][g].hasOwnProperty(y)){var v=E[e][g][y];if(v.length){h(t,c.randomSplice(v));break}}}}catch(t){i.emit("internal_error",'Error occurred while rendering ad for "'+e+'".',t.stack)}}function b(e,r){if(void 0===e.partner||void 0===e.id||void 0===e.targeting||void 0===e.size&&void 0===e.price)return f.error("Invalid message from creative iframe"),void f.error(e);var n=e.partner,o=e.price,s=e.id,u=e.targeting,l=e.size;if(!A[n])return void f.error("Partner "+n+" not recognized");if(!u.hasOwnProperty(A[n].idKey))return void i.emit("internal_error","targeting map missing key "+A[n].idKey);var p=u[A[n].idKey],d=null;if(void 0!==o)for(var h=[O,N],v=0;v<h.length&&!(d=t(h[v],n,o,p));v++);else{if(!a.isSize(l))return void f.error("Either price or correct size should be provided by message from creative iframe");var m=a.arrayToString(l);if(L&&L.hasOwnProperty(m)){var b=L[m];m=a.arrayToString(b)}d=t(E,n,m,p)}if(!d)return void f.error("No ad found or ad expired");var _=c.randomSplice(d),w=y(_);if(!w)return void i.emit("internal_error","No ad found for ad ID "+_);g(w);for(var I,S=w.size,T=w.adm,D=document.getElementsByTagName("iframe"),j=0;j<D.length;j++)if(D[j].contentWindow===r){I=D[j];break}I&&(I.width=String(S[0]),I.height=String(S[1]),I.parentElement.style.width=S[0]+"px",I.parentElement.style.height=S[1]+"px"),r.postMessage("ix_ht_render_adm:"+JSON.stringify({adm:T,id:s,size:S}),"*")}function _(e,t,r){var n=p.validate({type:"object",strict:!0,properties:{partnerId:{type:"string",minLength:1},lineItemType:{type:"integer",exec:function(e,t){var r=!1;for(var n in o.LineItemTypes)if(o.LineItemTypes.hasOwnProperty(n)&&o.LineItemTypes[n]===t){r=!0;break}r||this.report("`lineItemType` must be one of the predefined types in constants.LineItemTypes")}},idKey:{type:"string",minLength:1}}},{partnerId:e,lineItemType:t,idKey:r});if(!n.valid)throw l("INVALID_ARGUMENT",n.format());A.hasOwnProperty(e)||(A[e]={}),A[e].lineItemType=t,A[e].idKey=r}var w,I,S,L,T={type:"object",strict:!0,properties:{sessionId:{type:"string"},partnerId:{type:"string"},adm:{minLength:1,type:"string"},requestId:{optional:!0,type:"string"},timeOfExpiry:{optional:!0,type:"number"},auxFn:{optional:!0,type:"function"},auxArgs:{optional:!0,type:"array"},size:{optional:!0,type:["array","string"],exec:function(e,t){t&&(c.isString(t)||a.isSize(t)||this.report("must either be a size array or a string"))}},price:{optional:!0,type:"string"},dealId:{optional:!0,type:"string"}}},A={},E={},N={},O={},D={};return function(){w={},I={},L=e.sizeRetargeting||null,S=setInterval(n,o.RENDER_SERVICE_EXPIRY_SWEEP_TIMER),i=s.services.EventsService,window.addEventListener("message",function(e){try{if(!c.isString(e.data)||"ix_ht_render:"!==e.data.substr(0,"ix_ht_render:".length))return;b(JSON.parse(e.data.substr("ix_ht_render:".length)),e.source,e.origin)}catch(e){i.emit("internal_error","Error occurred while rendering ad.",e.stack)}},!1)}(),{__type__:"RenderService",registerAd:v,render:h,registerPartner:_,renderDfpAd:m}}var i,o=e(13),a=e(25),s=e(47),u=e(26),c=e(27),l=e(28),p=e(18),f=e(24);t.exports=n},{}],44:[function(e,t,r){"use strict";function n(){function e(){return{applies:!0,consentString:""}}function t(){return!1}function r(e){return e}function n(){return i.resolve()}return{__type__:"ComplianceService",gdpr:{getConsent:e,setApplies:function(){}},isPrivacyEnabled:t,delay:r,wait:n}}var i=e(17);t.exports=n},{}],45:[function(e,t,r){"use strict";function n(){function e(e){return function(){p[e].state=f.TERMINATED;for(var t=0;t<p[e].cbs.length;t++)try{p[e].cbs[t]()}catch(e){u.error("Error occurred running timer callbacks."),u.error(e.stack)}delete p[e].cbs,delete p[e].timer}}function t(t,r,n){var u=s.validate({type:"object",strict:!0,properties:{timeout:{type:"number",gt:0},startNow:{type:"boolean",optional:!0},fn:{type:"function",optional:!0}}},{startNow:r,timeout:t,fn:n});if(!u.valid)throw a("INVALID_ARGUMENT",u.format());var c=o.generateUniqueId(i.SESSION_ID_LENGTH);return r=!!r,n=n?[n]:[],p[c]={state:f.NEW,cbs:n,timeout:t},r&&(p[c].state=f.RUNNABLE,p[c].timer=setTimeout(e(c),t)),c}function r(t){var r=s.validate({type:"strict",minLength:1},t);if(!r.valid)throw a("INVALID_ARGUMENT",r.format());if(!p.hasOwnProperty(t))return void u.error('Tried to add callback for non-existent timer "'+t+'".');p[t].state===f.NEW&&(p[t].state=f.RUNNABLE,p[t].timer=setTimeout(e(t),p[t].timeout))}function n(e,t){var r=s.validate({type:"object",strict:!0,properties:{id:{type:"strict",minLength:1},fn:{type:"function"}}},{id:e,fn:t});if(!r.valid)throw a("INVALID_ARGUMENT",r.format());return p.hasOwnProperty(e)?p[e].state===f.TERMINATED?void u.warn('Tried to add callback for "DONE" timer "'+e+'".'):void p[e].cbs.unshift(t):void u.error('Tried to add callback for non-existent timer "'+e+'".')}function c(e){var t=s.validate({type:"strict",minLength:1},e);if(!t.valid)throw a("INVALID_ARGUMENT",t.format());return p.hasOwnProperty(e)?p[e].state:(u.error('Tried to get state for non-existent timer "'+e+'".'),null)}function l(e){var t=s.validate({type:"strict",minLength:1},e);if(!t.valid)throw a("INVALID_ARGUMENT",t.format());return p.hasOwnProperty(e)?p[e].state===f.TERMINATED?void u.warn('Tried to clear "DONE" timer "'+e+'".'):(p[e].state=f.TERMINATED,clearTimeout(p[e].timer),delete p[e].cbs,void delete p[e].timer):void u.error('Tried to clear non-existent timer "'+e+'".')}var p,f={NEW:0,RUNNABLE:1,TERMINATED:2};return function(){p={}}(),{__type__:"TimerService",TimerStates:f,createTimer:t,startTimer:r,addTimerCallback:n,getTimerState:c,clearTimer:l}}var i=e(13),o=e(26),a=e(28),s=e(18),u=e(24);t.exports=n},{}],46:[function(e,t,r){"use strict";var n,i,o=(e(9),e(11)),a=e(29),s=e(47),u=e(27),c=e(24);window[s.NAMESPACE]=window[s.NAMESPACE]||{},window[s.NAMESPACE].cmd=window[s.NAMESPACE].cmd||[];var l=window[s.NAMESPACE].cmd;window[s.NAMESPACE]=function(){function e(e){return s.LastLineGoogletag.display?s.LastLineGoogletag.display(e):window.googletag.display(e)}function t(e,t){return s.LastLineGoogletag.refresh?s.LastLineGoogletag.refresh(e,t):window.googletag.pubads().refresh(e,t)}function r(e){return s.LastLineGoogletag.destroySlots?s.LastLineGoogletag.destroySlots(e):window.googletag.destroySlots(e)}function l(){return s.LastLineGoogletag.enableSingleRequest?s.LastLineGoogletag.enableSingleRequest():window.googletag.pubads().enableSingleRequest()}function p(){return s.LastLineGoogletag.disableInitialLoad?s.LastLineGoogletag.disableInitialLoad():window.googletag.pubads().disableInitialLoad()}function f(t){try{if(!u.isString(t))return i.emit("error","divId must be a string"),e(t);I.Layers.GptLayer.display(t).catch(function(r){return c.error("Error occurred while displaying slot"),c.error(r.stack),i.emit("error",r),e(t)})}catch(r){return c.error("Error occurred while displaying slot"),c.error(r.stack),i.emit("error",r),e(t)}}function d(e,r){try{if(e&&!u.isArray(e))return i.emit("error","gSlots must be an array of g-slots."),t(e,r);I.Layers.GptLayer.refresh(e,r).catch(function(n){return c.error("Error occurred while refreshing slot"),c.error(n.stack),i.emit("error",n),t(e,r)})}catch(n){return c.error("Error occurred while refreshing slot"),c.error(n.stack),i.emit("error",n),t(e,r)}}function y(e){try{return e&&!u.isArray(e)?(i.emit("error","gSlots must be an array of g-slots."),r(e)):I.Layers.GptLayer.destroySlots(e)}catch(t){return c.error("Error occurred while destroying slots"),c.error(t.stack),i.emit("error",t),r(e)}}function g(){try{return I.Layers.GptLayer.enableSingleRequest()}catch(e){return c.error("Error occurred calling enableSingleRequest"),c.error(e.stack),i.emit("error",e),l()}}function h(){try{return I.Layers.GptLayer.disableInitialLoad()}catch(e){return c.error("Error occurred calling disableInitialLoad"),c.error(e.stack),i.emit("error",e),p()}}function v(){return L}function m(e){if(!u.isObject(e))return void i.emit("error","invalid first-party data: `data` must be an object");if(e.hasOwnProperty("rubicon")){if(!u.isObject(e.rubicon))return void i.emit("error","invalid first-party data.rubicon");for(var t in e.rubicon)if(e.rubicon.hasOwnProperty(t)&&-1===["keywords","inventory","visitor"].indexOf(t))return void i.emit("error","invalid first-party data: unrecognized property "+t+" of `data.rubicon`");if(e.rubicon.hasOwnProperty("keywords")&&!u.isArray(e.rubicon.keywords,"string"))return void i.emit("error","invalid first-party data: `data.rubicon.keywords` must be an array of strings");if(e.rubicon.hasOwnProperty("inventory")){if(!u.isObject(e.rubicon.inventory))return void i.emit("error","invalid first-party data: `data.rubicon.inventory` must be an object");for(var r in e.rubicon.inventory)if(e.rubicon.inventory.hasOwnProperty(r)&&!u.isArray(e.rubicon.inventory[r],"string"))return void i.emit("error","invalid first-party data: property "+r+" of `data.rubicon.inventory` must be an array of strings")}if(e.rubicon.hasOwnProperty("visitor")){if(!u.isObject(e.rubicon.visitor))return void i.emit("error","invalid first-party data: `data.rubicon.visitor` must be an object");for(var n in e.rubicon.visitor)if(e.rubicon.visitor.hasOwnProperty(n)&&!u.isArray(e.rubicon.visitor[n],"string"))return void i.emit("error","invalid first-party data: property "+n+" of `data.rubicon.visitor` must be an array of strings")}}try{I.Layers.PartnersLayer.setFirstPartyData(e)}catch(e){c.error(e.stack),i.emit("error",e)}}function b(e,t,r){var n="";try{if(!u.isBoolean(t))return i.emit("error","`once` must be a boolean"),n;if(!u.isFunction(r))return i.emit("error","`callback` must be a function"),n;if(!u.isString(e))return i.emit("error","`eventName` must be a string"),n;if(!T.hasOwnProperty(e))return i.emit("error","Unrecognized event "+e),n;var o=function(){var t=Array.prototype.slice.call(arguments);r(e,JSON.stringify(t))};n=t?i.once(e,o):i.on(e,o)}catch(t){c.error("Error occurred while subscribing to event "+e),c.error(t.stack),i.emit("error",t)}return n}function _(e){try{if(!u.isString(e))return void i.emit("error","`subscriptionId` must be a string");i.off(e)}catch(t){c.error("Error occurred while unsubscribing from event "+e),c.error(t.stack),i.emit("error",t)}}var w,I,S,L,T={error:1,warning:2,global_timeout_reached:3,partner_instantiated:4,partner_request_sent:5,partner_request_complete:6};if(function(){s.LastLineGoogletag={};try{w={DeviceTypeChecker:{method:"USER_AGENT",configs:{}},htSlots:{"728x90_970x250":{id:"728x90_970x250",targeting:[{}],deviceType:"desktop",sizeMapping:{"0x0":[[728,90],[970,250]]}},"300x250":{id:"300x250",targeting:[{}],deviceType:"desktop",sizeMapping:{"0x0":[[300,250]]}}},Services:{TimerService:{},RenderService:{sizeRetargeting:{}},HeaderStatsService:{siteId:"231337",configId:"133457086510172",options:{auctionCycle:!0}},EventsService:{}},Layers:[{layerId:"GptLayer",configs:{globalTimeout:1e3,enableSingleRequest:!1,disableInitialLoad:!1,override:{display:!0,refresh:!0,destroySlots:!0,enableSingleRequest:!1,disableInitialLoad:!1},slotMapping:{selectors:[["size","targeting"]],filters:["deviceType"]}}},{layerId:"MediationLayer",configs:{mediationLevel:"NONE"}},{layerId:"PartnersLayer",configs:{partners:{OptimeraHtb:{enabled:!0,configs:{clientID:0,optimeraHost:"//s3.amazonaws.com",optimeraPath:"/worthleydev/scores-json",xSlots:{xSlot1:{divID:"div-0",sizes:[[728,90]]},xSlot2:{divID:"div-1",sizes:[[970,250]]},xSlot3:{divID:"div-1",sizes:[[300,250]]}},mapping:{"728x90_970x250":["xSlot1","xSlot2"],"300x250":["xSlot1"]}}}},prefetchOnLoad:{enabled:!1,configs:{dynamic:{slotMapping:{selectors:[["size","targeting"]],filters:["deviceType"],style:"SINGLE"}}}}}}]},window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],I=a(w).getDirectInterface(),n=s.services.ComplianceService,i=s.services.EventsService;var v=w.Layers[0].configs.override;if(v){var m=function(){v.display&&(s.LastLineGoogletag.display=window.googletag.display,window.googletag.display=n.delay(f)),v.refresh&&(s.LastLineGoogletag.refresh=window.googletag.pubads().refresh.bind(window.googletag.pubads()),window.googletag.pubads().refresh=n.delay(d)),v.destroySlots&&(s.LastLineGoogletag.destroySlots=window.googletag.destroySlots,window.googletag.destroySlots=n.delay(y)),v.enableSingleRequest&&(s.LastLineGoogletag.enableSingleRequest=window.googletag.pubads().enableSingleRequest.bind(window.googletag.pubads()),window.googletag.pubads().enableSingleRequest=g),v.disableInitialLoad&&(s.LastLineGoogletag.disableInitialLoad=window.googletag.pubads().disableInitialLoad.bind(window.googletag.pubads()),window.googletag.pubads().disableInitialLoad=h)};s.initQueue.unshift(m);var b=function(){s.initQueue=o(s.initQueue)};u.isArray(window.googletag.cmd)?window.googletag.cmd.unshift(b):window.googletag.cmd.push(b)}L={refresh:n.delay(d),enableSingleRequest:g,disableInitialLoad:h};try{n.wait().then(function(){I.Layers.PartnersLayer.prefetchOnLoad()}).catch(function(e){c.error("Error occured while waiting for compliance data"),c.error(e.stack)})}catch(e){c.error("Error occured while trying to prefetch."),c.error(e.stack)}}catch(n){c.error("Error occurred trying to load modules. Defaulting to GPT."),c.error(n),c.error(n.stack),S={display:e,destroySlots:r,pubads:function(){return{refresh:t,enableSingleRequest:l,disableInitialLoad:p}},setFirstPartyData:function(){},subscribeEvent:function(){return""},unsubscribeEvent:function(){}}}}(),S)return S;var A={};if(window[s.NAMESPACE])for(var E in window[s.NAMESPACE])window[s.NAMESPACE].hasOwnProperty(E)&&(A[E]=window[s.NAMESPACE][E]);A.__type__="PreGptShell",A.display=n.delay(f),A.refresh=n.delay(d),A.destroySlots=n.delay(y),A.enableSingleRequest=g,A.disableInitialLoad=h,A.pubads=v,A.setFirstPartyData=m,A.subscribeEvent=b,A.unsubscribeEvent=_,A.apiReady=!0;try{A.OptimeraHtb={render:s.services.RenderService.renderDfpAd.bind(null,"OptimeraHtb")},I.Layers.PartnersLayer.Partners.OptimeraHtb&&(A.OptimeraHtb=A.OptimeraHtb||{},A.OptimeraHtb.adResponseCallback=I.Layers.PartnersLayer.Partners.OptimeraHtb.adResponseCallback)}catch(e){c.error(e)}return A}(),window[s.NAMESPACE].cmd=o(l)},{}],47:[function(e,t,r){"use strict";var n={NAMESPACE:"headertag",PRODUCT:"DfpMode",services:{},htSlots:[],htSlotsMap:{},DeviceTypeChecker:{},initQueue:[],globalTimeout:null,instanceId:null,version:"2.9.2"};t.exports=n},{}]},{},[1,46]);